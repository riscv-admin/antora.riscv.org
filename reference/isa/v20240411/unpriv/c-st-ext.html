<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>"C" Extension for Compressed Instructions, Version 2.0 :: RISC-V Ratified Specifications Library</title>
    <link rel="canonical" href="https://docs.riscv.org/isa/unpriv/c-st-ext.html">
    <link rel="prev" href="zfinx.html">
    <link rel="next" href="zc.html">
    <meta name="generator" content="Antora 3.1.14">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../../../_/css/site.css">
    <link rel="stylesheet" href="../../../_/css/vendor/search.css">
    <link rel="stylesheet" href="../../../_/css/vendor/page-search.css">
    <link rel="stylesheet" href="../../../_/css/vendor/spring-tabs.css">

    <meta name="antora-ui-version" content="8f151b93013364f76ea3cbfbc8df5791bdc1cd56"> 
    <meta name="version" content="v20240411">
    <meta name="component" content="isa">
    <meta name="latest-version" content="false">
    <link rel="icon" href="../../../_/img/favicon.ico" type="image/vnd.microsoft.icon">
  </head>
  <body class="article">
<header class="header">
  <nav class="navbar">
<div class="navbar-brand">
  <a class="navbar-item" href="https://riscv.org">
    <img id="riscvlogo" src="../../../_/img/risc-v_logo.svg" alt="RISCV" />
  </a>
</div>
    </div>
<div class="navbar-end">
<div class="navbar-item home">
  <a class="navbar-link" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/805568530/RISC-V+Technical+Specifications+Proposed" aria-label="Library">
Library</a>
</div>
</div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">ISA</a>
          <div class="navbar-dropdown">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/805601287/The+RISC-V+Instruction+Set+Manual+Volume+I+Unprivileged+ISA">Unprivileged <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/805568665">Privileged <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Profiles</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/805240860/RVA23+Profile">RVA23 Profile <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/805568757/RVB23+Profile">RVB23 Profile <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/806289411/RISC-V+Profiles">RISC-V Profiles <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Non-ISA Hardware</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/806289428/RISC-V+Advanced+Interrupt+Architecture">Advanced
              Interrupt Architecture <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/806617089/RISC-V+IOMMU+Architecture">IOMMU
              Architecture <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/806617106/RISC-V+Platform-Level+Interrupt+Controller">Platform-Level
              Interrupt Controller <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" 
              href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/806617123/RISC-V+Server+SOC">Server
              SOC <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
          </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Debug, Trace, RAS</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926657/Efficient+Trace+for+RISC-V">Efficient Trace< <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809697292/RISC-V+Capacity+and+Bandwidth+QoS+Register+Interface">QoS Register Interface <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926674/The+RISC-V+Debug">Debug <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926691/RISC-V+N-Trace+Nexus-based+Trace">N-Trace <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809697310/RISC-V+RERI+Architecture">RERI Architecture <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057729/RISC-V+Trace+Connectors">Trace Connectors <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057747/RISC-V+Trace+Control+Interface">Trace Control Interface <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057766/Unformatted+Trace+Diagnostic+Data+Packet+Encapsulation+for+RISC-V">Unformatted Trace and Diagnostic Data Packet
              Encapsulation <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
        </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">Platform Software</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926709/RISC-V+Boot+and+Runtime+Services+BRS">Boot and Runtime Services <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057786/RISC-V+Functional+Fixed+Hardware">Functional Fixed Hardware <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926726/RISC-V+IO+Mapping+Table">IO Mapping Table <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057803/RISC-V+Platform+Management+Interface+RPMI">Platform Management Interface <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057820/RISC-V+Semihosting">Semihosting <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057837/RISC-V+Supervisor+Binary+Interface">Supervisor Binary Interface <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057854/RISC-V+UEFI+Protocol">UEFI Protocol <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
        </div>
        </div>
        <div class="navbar-item has-dropdown is-hoverable">
          <a class="navbar-link" href="#">App Enablement</a>
          <div class="navbar-dropdown" style="min-width: 280px">
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/810057873/RISC-V+ABIs">Application Binary Interface <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
            <a class="navbar-item" target="_blank" rel="noopener noreferrer" href="https://riscv.atlassian.net/wiki/spaces/HOME/pages/809926743/RISC-V+Vector+C+Intrinsic">Vector C Intrinsic <svg class="nav-external-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16">
    <path d="M10 1h5v5h-2V3.41l-6.29 6.3-1.42-1.42L11.59 2H10V1zM14 14H2V2h5V0H2a2 2 0 0 0-2 2v12
             a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-5h-2v5z"/>
  </svg></a>
          </div>
        </div>
    </div>
    <label class="theme-toggler">
      <input type="checkbox" type="checkbox" id="switch-theme-checkbox" name="switch-theme-checkbox" />
      <span class="icon"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="moon"
          class="svg-inline--fa fa-moon moon" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 384 512">
          <path fill="currentColor"
            d="M223.5 32C100 32 0 132.3 0 256S100 480 223.5 480c60.6 0 115.5-24.2 155.8-63.4c5-4.9 6.3-12.5 3.1-18.7s-10.1-9.7-17-8.5c-9.8 1.7-19.8 2.6-30.1 2.6c-96.9 0-175.5-78.8-175.5-176c0-65.8 36-123.1 89.3-153.3c6.1-3.5 9.2-10.5 7.7-17.3s-7.3-11.9-14.3-12.5c-6.3-.5-12.6-.8-19-.8z">
          </path>
        </svg>
        <svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="sun" class="svg-inline--fa fa-sun sun"
          role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512">
          <path fill="currentColor"
            d="M361.5 1.2c5 2.1 8.6 6.6 9.6 11.9L391 121l107.9 19.8c5.3 1 9.8 4.6 11.9 9.6s1.5 10.7-1.6 15.2L446.9 256l62.3 90.3c3.1 4.5 3.7 10.2 1.6 15.2s-6.6 8.6-11.9 9.6L391 391 371.1 498.9c-1 5.3-4.6 9.8-9.6 11.9s-10.7 1.5-15.2-1.6L256 446.9l-90.3 62.3c-4.5 3.1-10.2 3.7-15.2 1.6s-8.6-6.6-9.6-11.9L121 391 13.1 371.1c-5.3-1-9.8-4.6-11.9-9.6s-1.5-10.7 1.6-15.2L65.1 256 2.8 165.7c-3.1-4.5-3.7-10.2-1.6-15.2s6.6-8.6 11.9-9.6L121 121 140.9 13.1c1-5.3 4.6-9.8 9.6-11.9s10.7-1.5 15.2 1.6L256 65.1 346.3 2.8c4.5-3.1 10.2-3.7 15.2-1.6zM160 256a96 96 0 1 1 192 0 96 96 0 1 1 -192 0zm224 0a128 128 0 1 0 -256 0 128 128 0 1 0 256 0z">
          </path>
        </svg></span>
      <span class="text">light</span>
    </label>
  </nav>
</header>
<script>
  !function (theme) {
    if (theme === 'dark') {
      document.getElementById('switch-theme-checkbox').parentElement.classList.add('active')
    }
  }(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: dark)')?.matches && 'dark'))
</script>
<div class="body">
<div class="nav-container" data-component="isa" data-version="v20240411">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">ISA Specifications</span>
  <button class="version" id="browse-version">Version: 20240411</button>
  </div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Volume I: RISC-V Unprivileged ISA Specification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="unpriv-index.html">Unprivileged Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="unpriv-contributors.html">Preamble</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="colophon.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="intro.html">Chapter 1. Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv32.html#sec:rv32">Chapter 2. RV32I Base Integer Instruction Set, Version 2.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv32e.html#sec:rv32e">Chapter 3. RV32E and RV64E Base Integer Instruction Sets, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv64.html">Chapter 4.RV64I Base Integer Instruction Set, Version 2.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv128.html">Chapter 5. RV128I Base Integer Instruction Set, Version 1.7</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zifencei.html">Chapter 6. "Zifencei" Extension for Instruction-Fetch Fence, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zicsr.html#zicsr">Chapter 7."Zicsr", Extension for Control and Status Register (CSR) Instructions, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="counters.html#sec:counters">Chapter 8. "Zicntr" and "Zihpm" Extensions for Counters, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zihintntl.html">Chapter 9. "Zihintntl" Extension for Non-Temporal Locality Hints, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zihintpause.html">Chapter 10. "Zihintpause" Extension for Pause Hint, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zimop.html">Chapter 11. "Zimop" Extension for May-Be-Operations, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zicond.html">Chapter 12. "Zicond" Extension for Integer Conditional Operations, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="m-st-ext.html">Chapter 13. "M" Extension for Integer Multiplication and Division, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="a-st-ext.html">Chapter 14. "A" Extension for Atomic Instructions, Version 2.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zawrs.html">Chapter 15. "Zawrs" Extension for Wait-on-Reservation-Set instructions, Version 1.01</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zacas.html">Chapter 16. "Zacas" Extension for Atomic Compare-and-Swap (CAS) Instructions, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rvwmo.html">Chapter 17. RVWMO Memory Consistency Model, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="ztso-st-ext.html">Chapter 18. "Ztso" Extension for Total Store Ordering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="cmo.html">Chapter 19. "CMO" Extensions for Base Cache Management Operation ISA, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="f-st-ext.html">Chapter 20. "F" Extension for Single-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="d-st-ext.html">Chapter 21. "D" Extension for Double-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="q-st-ext.html">Chapter 22. "Q" Extension for Quad-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfh.html">Chapter 23. "Zfh" and "Zfhmin" Extensions for Half-Precision Floating-Point, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfa.html">Chapter 24. "Zfa" Extension for Additional Floating-Point Instructions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfinx.html">Chapter 25. "Zfinx", "Zdinx", "Zhinx", "Zhinxmin" Extensions for Floating-Point in Integer Registers, Version 1.0</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link"  href="c-st-ext.html">Chapter 26. "C" Extension for Compressed Instructions, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zc.html">Chapter 27. "Zc*" Extension for Code Size Reduction, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="b-st-ext.html">Chapter 28. "B" Extension for Bit Manipulation, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="j-st-ext.html">Chapter 29. "J" Extension for Dynamically Translated Languages, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="p-st-ext.html">Chapter 30. "P" Extension for Packed SIMD Instructions, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="v-st-ext.html">Chapter 31. "V" Standard Extension for Vector Operations, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="scalar-crypto.html">Chapter 32. Cryptography Extensions: Scalar &amp; Entropy Source Instructions, Version 1.0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="vector-crypto.html">Chapter 33.Cryptography Extensions: Vector Instructions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv-32-64g.html">Chapter 34. RV32/64G Instruction Set Listings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="extending.html">Chapter 35. Appendix: Extending the RISC-V ISA</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="naming.html">Chapter 36. ISA Extension Naming Conventions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="history.html">Chapter 37. Document Revision History</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="mm-eplan.html">Appendix A: RVWMO Explanatory Material, Version 0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="mm-formal.html">Appendix B: Formal Memory Model Specifications, Version 0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="vector-examples.html">Appendix C: Vector Assembly Code Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="calling-convention.html">Appendix D: Calling Convention for Vector State (Not authoritative - Placeholder Only)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Volume II: RISC-V Privileged ISA Specification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-index.html">Privileged Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-contributors.html">Preamble</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-preface.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-csrs.html">Control and Status Registers (CSRs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/machine.html">Machine-Level ISA, Version 1.13</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smstateen.html">"Smstateen/Ssstateen" Extensions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/indirect-csr.html">"Smcsrind/Sscsrind" Indirect CSR Access, version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smepmp.html">"Smepmp" Extension for PMP Enhancements, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smcntrpmf.html">"Smcntrpmf" Cycke and Instret Privilege Mode Filtering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/rnmi.html">"Smrnmi" Extension for Resumable Non-Maskable Interrupts, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smcdeleg.html">"Smcdeleg" Counter Delegation Extension, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/supervisor.html">Supervisor-Level ISA, Version 1.13</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/svnapot.html">"Svnapot" Extension for NAPOT Translation Contiguity, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/svpbmt.html">"Svpbmt" Extension for Page-Based Memory Types, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/svinval.html">"Svinval" Extension for Fine-Grained Address-Translation Cache Invalidation, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/svadu.html">"Svadu" Extension for Hardware Updating of A/D Bits, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/svvptc.html">"Svvptc" Extension for Obviating Memory-Management Instructions after Marking PTEs Valid, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/sstc.html">"Sstc" Extension for Supervisor-mode Timer Interrupts, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/sscofpmf.html">"Sscofpmf" Extension for Count Overflow and Mode-Based Filtering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/hypervisor.html">"H" Extension for Hypervisor Support, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-insns.html">RISC-V Privileged Instruction Set Listings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-history.html">History</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Bibliography</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../biblio/bibliography.html">Bibliography</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title=""C" Extension for Compressed Instructions, Version 2.0"
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
        <a href="https://github.com/riscv/riscv-isa-manual/issues/new" target="_blank" title="Issues">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="24"
            viewBox="0 0 24 24"
            width="24"
          ><path
              d="m16 2.012 3 3L16.713 7.3l-3-3zM4 14v3h3l8.299-8.287-3-3zm0 6h16v2H4z"
            ></path></svg>
          Report a Problem
        </a>
        <a href="https://github.com/riscv/riscv-isa-manual" target="_blank" title="GitHub">
          <svg
            xmlns="http://www.w3.org/2000/svg"
            height="512px"
            id="Layer_1"
            version="1.1"
            viewBox="0 0 512 512"
            width="512px"
          ><style type="text/css">< .st0{fill-rule:evenodd;clip-rule:evenodd;}
              ]]></style><g><path
                class="st0"
                d="M256,32C132.3,32,32,134.8,32,261.7c0,101.5,64.2,187.5,153.2,217.9c11.2,2.1,15.3-5,15.3-11.1   c0-5.5-0.2-19.9-0.3-39.1c-62.3,13.9-75.5-30.8-75.5-30.8c-10.2-26.5-24.9-33.6-24.9-33.6c-20.3-14.3,1.5-14,1.5-14   c22.5,1.6,34.3,23.7,34.3,23.7c20,35.1,52.4,25,65.2,19.1c2-14.8,7.8-25,14.2-30.7c-49.7-5.8-102-25.5-102-113.5   c0-25.1,8.7-45.6,23-61.6c-2.3-5.8-10-29.2,2.2-60.8c0,0,18.8-6.2,61.6,23.5c17.9-5.1,37-7.6,56.1-7.7c19,0.1,38.2,2.6,56.1,7.7   c42.8-29.7,61.5-23.5,61.5-23.5c12.2,31.6,4.5,55,2.2,60.8c14.3,16.1,23,36.6,23,61.6c0,88.2-52.4,107.6-102.3,113.3   c8,7.1,15.2,21.1,15.2,42.5c0,30.7-0.3,55.5-0.3,63c0,6.1,4,13.3,15.4,11C415.9,449.1,480,363.1,480,261.7   C480,134.8,379.7,32,256,32z"
              ></path></g></svg>
          GitHub Project
        </a>

        <div class="dropdown-toc">
          <a id="pdfDropdownButton" aria-haspopup="true" aria-expanded="false" class="sidebar-link" download>
            <span>Download PDFs</span>
            <svg class="chevron" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round" stroke-linejoin="round" aria-hidden="true">
              <polyline points="6 9 12 15 18 9"></polyline>
            </svg>
          </a>
          <ul id="pdfDropdownMenu" class="dropdown-menu" hidden>
              <li style="padding-left: 0px;"><a href="https://jjscheel.github.io/antora.riscv.org/reference/isa/v20240411/_attachments/riscv-unprivileged.pdf" class="dropdown-item" target="_blank" rel="noopener noreferrer" style="color: #003262;" download>Unprivileged ISA</a></li>
              <li style="padding-left: 0px;"><a href="https://jjscheel.github.io/antora.riscv.org/reference/isa/v20240411/_attachments/riscv-privileged.pdf" class="dropdown-item" target="_blank" rel="noopener noreferrer" style="color: #003262;" download>Privileged ISA</a></li>
          </ul>
        </div>
       <script>
  (function() {
    const btn = document.getElementById('pdfDropdownButton');
    const menu = document.getElementById('pdfDropdownMenu');

    // Toggle dropdown on button click
    btn.addEventListener('click', function(e) {
      e.preventDefault();
      const expanded = btn.getAttribute('aria-expanded') === 'true';
      btn.setAttribute('aria-expanded', !expanded);
      menu.hidden = expanded;
    });

    // Close dropdown when clicking outside
    document.addEventListener('click', function(e) {
      if (!btn.contains(e.target) && !menu.contains(e.target)) {
        btn.setAttribute('aria-expanded', 'false');
        menu.hidden = true;
        btn.focus(); // return focus to button
      }
    });

    // Close dropdown on Escape key press
    document.addEventListener('keydown', function(e) {
      if (e.key === 'Escape' || e.key === 'Esc') {
        btn.setAttribute('aria-expanded', 'false');
        menu.hidden = true;
        btn.focus();
      }
    });
  })();
</script>

        <style>
          .dropdown-toc{
            position: relative;
            display: inline-block;
          }
          .dropdown-menu {
            position: absolute;
            top: 100%;
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            background: #ffffff;
            min-width: 100px;
            z-index: 1000;
            list-style-type: none;
          }
          .dropdown-item {
            padding-left: 1.5rem;
            padding-right: 1.5rem;
            display: block;
            color: #000000;
            text-decoration: none;
            white-space: nowrap;
            user-select: none;
          }
          .dropdown-item:hover{
            background-color: #fdb515;
            outline: none;
          }

          .chevron {
            stroke-width: 2.5;
            transition: transform 0.2s ease;
          }
          [aria-expanded="true"] .chevron {
            transform: rotate(180deg);
          }
        </style>
    </div>
  </div>
</aside>
<article class="doc">
<div class="breadcrumbs-container">
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li><a href="../index.html">ISA Specifications</a></li>
      <li>Volume I: RISC-V Unprivileged ISA Specification</li>
      <li><a href="c-st-ext.html">Chapter 26. "C" Extension for Compressed Instructions, Version 2.0</a></li>
    </ul>
  </nav>
</div><div class="admonitionblock important latest">
  <table>
    <tbody><tr>
      <td class="icon">
        <i class="fa icon-important" title="Important"></i>
      </td>
      <td class="content">
        <div class="paragraph">
          <p> For the latest stable version, please use <a href="../../unpriv/c-st-ext.html">ISA Specifications Latest</a>!</p>
        </div>
      </td>
    </tr></tbody>
  </table>
</div>
<h1 id="page-title" class="page">"C" Extension for Compressed Instructions, Version 2.0</h1>
<div id="preamble">
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the RISC-V standard compressed instruction-set
extension, named "C", which reduces static and dynamic code size by
adding short 16-bit instruction encodings for common operations. The C
extension can be added to any of the base ISAs (RV32, RV64, RV128), and
we use the generic term "RVC" to cover any of these. Typically,
50%-60% of the RISC-V instructions in a program can be replaced with RVC
instructions, resulting in a 25%-30% code-size reduction.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="overview"><a class="anchor" href="#overview"></a>Overview</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RVC uses a simple compression scheme that offers shorter 16-bit versions
of common 32-bit RISC-V instructions when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the immediate or address offset is small, or</p>
</li>
<li>
<p>one of the registers is the zero register (<code>x0</code>), the ABI link register
(<code>x1</code>), or the ABI stack pointer (<code>x2</code>), or</p>
</li>
<li>
<p>the destination register and the first source register are identical, or</p>
</li>
<li>
<p>the registers used are the 8 most popular ones.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The C extension is compatible with all other standard instruction
extensions. The C extension allows 16-bit instructions to be freely
intermixed with 32-bit instructions, with the latter now able to start
on any 16-bit boundary, i.e., IALIGN=16. With the addition of the C
extension, no instructions can raise instruction-address-misaligned
exceptions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Removing the 32-bit alignment constraint on the original 32-bit
instructions allows significantly greater code density.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The compressed instruction encodings are mostly common across RV32C,
RV64C, and RV128C, but as shown in <a href="#rvc-instr-table0">Table 34</a>, a few opcodes are used for
different purposes depending on base ISA. For example, the wider
address-space RV64C and RV128C variants require additional opcodes to
compress loads and stores of 64-bit integer values, while RV32C uses the
same opcodes to compress loads and stores of single-precision
floating-point values. Similarly, RV128C requires additional opcodes to
capture loads and stores of 128-bit integer values, while these same
opcodes are used for loads and stores of double-precision floating-point
values in RV32C and RV64C. If the C extension is implemented, the
appropriate compressed floating-point load and store instructions must
be provided whenever the relevant standard floating-point extension (F
and/or D) is also implemented. In addition, RV32C includes a compressed
jump and link instruction to compress short-range subroutine calls,
where the same opcode is used to compress ADDIW for RV64C and RV128C.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Double-precision loads and stores are a significant fraction of static
and dynamic instructions, hence the motivation to include them in the
RV32C and RV64C encoding.</p>
</div>
<div class="paragraph">
<p>Although single-precision loads and stores are not a significant source
of static or dynamic compression for benchmarks compiled for the
currently supported ABIs, for microcontrollers that only provide
hardware single-precision floating-point units and have an ABI that only
supports single-precision floating-point numbers, the single-precision
loads and stores will be used at least as frequently as double-precision
loads and stores in the measured benchmarks. Hence, the motivation to
provide compressed support for these in RV32C.</p>
</div>
<div class="paragraph">
<p>Short-range subroutine calls are more likely in small binaries for
microcontrollers, hence the motivation to include these in RV32C.</p>
</div>
<div class="paragraph">
<p>Although reusing opcodes for different purposes for different base ISAs
adds some complexity to documentation, the impact on implementation
complexity is small even for designs that support multiple base ISAs.
The compressed floating-point load and store variants use the same
instruction format with the same register specifiers as the wider
integer loads and stores.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RVC was designed under the constraint that each RVC instruction expands
into a single 32-bit instruction in either the base ISA (RV32I/E, RV64I/E,
or RV128I) or the F and D standard extensions where present. Adopting
this constraint has two main benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hardware designs can simply expand RVC instructions during decode,
simplifying verification and minimizing modifications to existing
microarchitectures.</p>
</li>
<li>
<p>Compilers can be unaware of the RVC extension and leave code compression
to the assembler and linker, although a compression-aware compiler will
generally be able to produce better results.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We felt the multiple complexity reductions of a simple one-one mapping
between C and base IFD instructions far outweighed the potential gains
of a slightly denser encoding that added additional instructions only
supported in the C extension, or that allowed encoding of multiple IFD
instructions in one C instruction.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is important to note that the C extension is not designed to be a
stand-alone ISA, and is meant to be used alongside a base ISA.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Variable-length instruction sets have long been used to improve code
density. For example, the IBM Stretch [<a href="../biblio/bibliography.html#bib-stretch" class="xref page">17</a>], developed in the late 1950s, had
an ISA with 32-bit and 64-bit instructions, where some of the 32-bit
instructions were compressed versions of the full 64-bit instructions.
Stretch also employed the concept of limiting the set of registers that
were addressable in some of the shorter instruction formats, with short
branch instructions that could only refer to one of the index registers.
The later IBM 360 architecture [<a href="../biblio/bibliography.html#bib-ibm360" class="xref page">18</a>] supported a simple variable-length
instruction encoding with 16-bit, 32-bit, or 48-bit instruction formats.</p>
</div>
<div class="paragraph">
<p>In 1963, CDC introduced the Cray-designed CDC 6600 [<a href="../biblio/bibliography.html#bib-cdc6600" class="xref page">19</a>], a precursor to RISC
architectures, that introduced a register-rich load-store architecture
with instructions of two lengths, 15-bits and 30-bits. The later Cray-1
design used a very similar instruction format, with 16-bit and 32-bit
instruction lengths.</p>
</div>
<div class="paragraph">
<p>The initial RISC ISAs from the 1980s all picked performance over code
size, which was reasonable for a workstation environment, but not for
embedded systems. Hence, both ARM and MIPS subsequently made versions of
the ISAs that offered smaller code size by offering an alternative
16-bit wide instruction set instead of the standard 32-bit wide
instructions. The compressed RISC ISAs reduced code size relative to
their starting points by about 25-30%, yielding code that was
significantly smaller than 80x86. This result surprised some, as their
intuition was that the variable-length CISC ISA should be smaller than
RISC ISAs that offered only 16-bit and 32-bit formats.</p>
</div>
<div class="paragraph">
<p>Since the original RISC ISAs did not leave sufficient opcode space free
to include these unplanned compressed instructions, they were instead
developed as complete new ISAs. This meant compilers needed different
code generators for the separate compressed ISAs. The first compressed
RISC ISA extensions (e.g., ARM Thumb and MIPS16) used only a fixed
16-bit instruction size, which gave good reductions in static code size
but caused an increase in dynamic instruction count, which led to lower
performance compared to the original fixed-width 32-bit instruction
size. This led to the development of a second generation of compressed
RISC ISA designs with mixed 16-bit and 32-bit instruction lengths (e.g.,
ARM Thumb2, microMIPS, PowerPC VLE), so that performance was similar to
pure 32-bit instructions but with significant code size savings.
Unfortunately, these different generations of compressed ISAs are
incompatible with each other and with the original uncompressed ISA,
leading to significant complexity in documentation, implementations, and
software tools support.</p>
</div>
<div class="paragraph">
<p>Of the commonly used 64-bit ISAs, only PowerPC and microMIPS currently
supports a compressed instruction format. It is surprising that the most
popular 64-bit ISA for mobile platforms (ARM v8) does not include a
compressed instruction format given that static code size and dynamic
instruction fetch bandwidth are important metrics. Although static code
size is not a major concern in larger systems, instruction fetch
bandwidth can be a major bottleneck in servers running commercial
workloads, which often have a large instruction working set.</p>
</div>
<div class="paragraph">
<p>Benefiting from 25 years of hindsight, RISC-V was designed to support
compressed instructions from the outset, leaving enough opcode space for
RVC to be added as a simple extension on top of the base ISA (along with
many other extensions). The philosophy of RVC is to reduce code size for
embedded applications <em>and</em> to improve performance and energy-efficiency
for all applications due to fewer misses in the instruction cache.
Waterman shows that RVC fetches 25%-30% fewer instruction bits, which
reduces instruction cache misses by 20%-25%, or roughly the same
performance impact as doubling the instruction cache size. [<a href="../biblio/bibliography.html#bib-waterman-ms" class="xref page">20</a>]</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="compressed-instruction-formats"><a class="anchor" href="#compressed-instruction-formats"></a>Compressed Instruction Formats</h2>
<div class="sectionbody">
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><a href="#rvc-form">Compressed 16-bit RVC instruction formats</a> shows the nine compressed instruction
formats. CR, CI, and CSS can use any of the 32 RVI registers, but CIW,
CL, CS, CA, and CB are limited to just 8 of them.
<a href="#registers">Registers specified by the three-bit <em>rs1</em>&#x2032;, <em>rs2</em>&#x2032;, and <em>rd</em>&#x2032; fields of the CIW, CL, CS, CA, and CB formats.</a> lists these popular registers, which
correspond to registers <code>x8</code> to <code>x15</code>. Note that there is a separate
version of load and store instructions that use the stack pointer as the
base address register, since saving to and restoring from the stack are
so prevalent, and that they use the CI and CSS formats to allow access
to all 32 data registers. CIW supplies an 8-bit immediate for the
ADDI4SPN instruction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The RISC-V ABI was changed to make the frequently used registers map to
registers 'x8-x15'. This simplifies the decompression decoder by
having a contiguous naturally aligned set of register numbers, and is
also compatible with the RV32E and RV64E base ISAs, which only have 16 integer
registers.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Compressed register-based floating-point loads and stores also use the
CL and CS formats respectively, with the eight registers mapping to <code>f8</code> to <code>f15</code>.
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>The standard RISC-V calling convention maps the most frequently used
floating-point registers to registers <code>f8</code> to <code>f15</code>, which allows the
same register decompression decoding as for integer register numbers.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
The formats were designed to keep bits for the two register source
specifiers in the same place in all instructions, while the destination
register field can move. When the full 5-bit destination register
specifier is present, it is in the same place as in the 32-bit RISC-V
encoding. Where immediates are sign-extended, the sign-extension is
always from bit 12. Immediate fields have been scrambled, as in the base
specification, to reduce the number of immediate muxes required.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The immediate fields are scrambled in the instruction formats instead of
in sequential order so that as many bits as possible are in the same
position in every instruction, thereby simplifying implementations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For many RVC instructions, zero-valued immediates are disallowed and
<code>x0</code> is not a valid 5-bit register specifier. These restrictions free up
encoding space for other instructions requiring fewer operand bits.</p>
</div>
<table id="rvc-form" class="tableblock frame-none grid-none stretch center">
<caption class="title">Table 1. Compressed 16-bit RVC instruction formats</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none fit-content right">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Format</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Meaning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Register</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CI</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Immediate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CSS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Stack-relative Store</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CIW</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wide Immediate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Load</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Store</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CA</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CB</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Branch/Arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CJ</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Jump</p></td>
</tr>
</tbody>
</table></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all stretch left">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">15 14 13 12</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">11 10 9 8 7</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">6 5 4 3 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">funct4</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rd/rs1</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rs2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rd/rs1</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rs2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs2&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">funct6</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;/rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs2&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">offset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;/rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">offset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock">jump target</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
<table id="registers" class="tableblock frame-none grid-none stretch center">
<caption class="title">Table 2. Registers specified by the three-bit <em>rs1</em>&#x2032;, <em>rs2</em>&#x2032;, and <em>rd</em>&#x2032; fields of the CIW, CL, CS, CA, and CB formats.</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none fit-content">
<colgroup>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RVC Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer Register ABI Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floating-Point Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floating-Point Register ABI Name</p></td>
</tr>
</tbody>
</table></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>000</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>001</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>010</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>011</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>110</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>111</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x8</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x9</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x10</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x11</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x12</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x13</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x14</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>s0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>s1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f8</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f9</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f10</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f11</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f12</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f13</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f14</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fs0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fs1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa5</code></p></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="load-and-store-instructions"><a class="anchor" href="#load-and-store-instructions"></a>Load and Store Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>To increase the reach of 16-bit instructions, data-transfer instructions
use zero-extended immediates that are scaled by the size of the data in
bytes: 4 for words, 8 for double
words, and 16 for quad words.</p>
</div>
<div class="paragraph">
<p>RVC provides two variants of loads and stores. One uses the ABI stack
pointer, <code>x2</code>, as the base address and can target any data register. The
other can reference one of 8 base address registers and one of 8 data
registers.</p>
</div>
<div class="sect2">
<h3 id="stack-pointer-based-loads-and-stores"><a class="anchor" href="#stack-pointer-based-loads-and-stores"></a>Stack-Pointer-Based Loads and Stores</h3>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBksoCIN9CRyGxpKQIqFjdSF1H3Rk7EVurgzDLFG5WZm4uxDCIWaYIs0yB-vLT0opTS6JNrIxqzK3MYoEqEULGNRZoQjWW6Gpwa8PhnKIUFK-hOScltbjkUecCA5CB-NhwGsUWQ1yeNkTYYojwtGksyWwU64zh1qWV5iWXGANthFhnjLDOGBQ3ej7hwQEgJwNZLnBWIIzlhpB2A8uDbInVUUjOz0vLBCYRmO_MamsB0MyiMw==" alt="svg">
</div>
</div>
<div id="c-sp-load-store" class="paragraph">
<p>These instructions use the CI format.</p>
</div>
<div class="paragraph">
<p>C.LWSP loads a 32-bit value from memory into register <em>rd</em>. It computes
an effective address by adding the <em>zero</em>-extended offset, scaled by 4,
to the stack pointer, <code>x2</code>. It expands to <code>lw rd, offset(x2)</code>. C.LWSP is
only valid when <em>rd</em>&#x2260;x0 the code points with <em>rd</em>=x0 are reserved.</p>
</div>
<div class="paragraph">
<p>C.LDSP is an RV64C/RV128C-only instruction that loads a 64-bit value
from memory into register <em>rd</em>. It computes its effective address by
adding the zero-extended offset, scaled by 8, to the stack pointer,
<code>x2</code>. It expands to <code>ld rd, offset(x2)</code>. C.LDSP is only valid when
<em>rd</em>&#x2260;x0 the code points with
<em>rd</em>=x0 are reserved.</p>
</div>
<div class="paragraph">
<p>C.LQSP is an RV128C-only instruction that loads a 128-bit value from
memory into register <em>rd</em>. It computes its effective address by adding
the zero-extended offset, scaled by 16, to the stack pointer, <code>x2</code>. It
expands to <code>lq rd, offset(x2)</code>. C.LQSP is only valid when
<em>rd</em>&#x2260;x0 the code points with
<em>rd</em>=x0 are reserved.</p>
</div>
<div class="paragraph">
<p>C.FLWSP is an RV32FC-only instruction that loads a single-precision
floating-point value from memory into floating-point register <em>rd</em>. It
computes its effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the stack pointer, <code>x2</code>. It expands to
<code>flw rd, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLDSP is an RV32DC/RV64DC-only instruction that loads a
double-precision floating-point value from memory into floating-point
register <em>rd</em>. It computes its effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>fld rd, offset(x2)</code>.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kT0PgjAQhnd_xW1dGhNbqNhVw6xhcCAMSKhh4CO0Dgb477YirYB2aN_e9Z73cu3a_M4h3gB0t0JJDgRDlZY5B1Q3CINZ6tnoe4AhVarVjxFBGB1_b8mAHcu3rFaSETayPMfydZ1sM539f8ygzEKLsvyGUgdlGloLIXMV-5z0e84Sw7Ih2gfLkNcflqGpcFU364fafsSjyhTViNXAqBnONrpGZ2Og1cmqy6RClw7feeOSYMjqShT6jz52OzYML3IseFs=" alt="svg">
</div>
</div>
<div id="c-sp-load-store-css" class="paragraph">
<p>These instructions use the CSS format.</p>
</div>
<div class="paragraph">
<p>C.SWSP stores a 32-bit value in register <em>rs2</em> to memory. It computes an
effective address by adding the <em>zero</em>-extended offset, scaled by 4, to
the stack pointer, <code>x2</code>. It expands to <code>sw rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.SDSP is an RV64C/RV128C-only instruction that stores a 64-bit value in
register <em>rs2</em> to memory. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>sd rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.SQSP is an RV128C-only instruction that stores a 128-bit value in
register <em>rs2</em> to memory. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 16, to the stack pointer, <code>x2</code>. It
expands to <code>sq rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSWSP is an RV32FC-only instruction that stores a single-precision
floating-point value in floating-point register <em>rs2</em> to memory. It
computes an effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the stack pointer, <code>x2</code>. It expands to
<code>fsw rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSDSP is an RV32DC/RV64DC-only instruction that stores a
double-precision floating-point value in floating-point register <em>rs2</em>
to memory. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>fsd rs2, offset(x2)</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Register save/restore code at function entry/exit represents a
significant portion of static code size. The stack-pointer-based
compressed loads and stores in RVC are effective at reducing the
save/restore static code size by a factor of 2 while improving
performance by reducing dynamic instruction bandwidth.</p>
</div>
<div class="paragraph">
<p>A common mechanism used in other ISAs to further reduce save/restore
code size is load-multiple and store-multiple instructions. We
considered adopting these for RISC-V but noted the following drawbacks
to these instructions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>These instructions complicate processor implementations.</p>
</li>
<li>
<p>For virtual memory systems, some data accesses could be resident in
physical memory and some could not, which requires a new restart
mechanism for partially executed instructions.</p>
</li>
<li>
<p>Unlike the rest of the RVC instructions, there is no IFD equivalent to
Load Multiple and Store Multiple.</p>
</li>
<li>
<p>Unlike the rest of the RVC instructions, the compiler would have to be
aware of these instructions to both generate the instructions and to
allocate registers in an order to maximize the chances of the them being
saved and stored, since they would be saved and restored in sequential
order.</p>
</li>
<li>
<p>Simple microarchitectural implementations will constrain how other
instructions can be scheduled around the load and store multiple
instructions, leading to a potential performance loss.</p>
</li>
<li>
<p>The desire for sequential register allocation might conflict with the
featured registers selected for the CIW, CL, CS, CA, and CB formats.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, much of the gains can be realized in software by replacing
prologue and epilogue code with subroutine calls to common prologue and
epilogue code, a technique described in Section 5.6 of [<a href="../biblio/bibliography.html#bib-waterman-phd" class="xref page">21</a>].</p>
</div>
<div class="paragraph">
<p>While reasonable architects might come to different conclusions, we
decided to omit load and store multiple and instead use the
software-only approach of calling save/restore millicode routines to
attain the greatest code size reduction.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="register-based-loads-and-stores"><a class="anchor" href="#register-based-loads-and-stores"></a>Register-Based Loads and Stores</h3>
<div id="reg-based-ldnstr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqFUj0PgjAQ3f0Vt7E0RltF0hXD5OLkQEj4KoaBj9A6GOC_W6VQiHwsfX25u3fvLldX7EnB3QHUYSo4BYwgDzJGwShKA0EgRCXjBpZ_wz4svh4C8S5lmdUiLUYGsSr2ZeYgR75lMeNC4xwMqmSsqi2mWdZ7VBaLJOFMuLgxvRG90DU6lzx0xgvz8KM_Ws9vnjDgbBO3hLuRpsLK2JkSb4U2p8byNtLnF6q7J688EuTPgL2_PRReFd47dPqAIyOTI5AkKvIkleel2hzNtv0Agm2vxg==?id=reg-based-ldnstr" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
These instructions use the CL format.</p>
</div>
<div class="paragraph">
<p>C.LW loads a 32-bit value from memory into register
<code><em>rd</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 4, to the base address in register
<code><em>rs1</em></code>. It expands to <code>lw rd, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.LD is an RV64C/RV128C-only instruction that loads a 64-bit value from
memory into register <code><em>rd</em></code>. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 8, to the base
address in register <code><em>rs1</em></code>. It expands to
<code>ld rd, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.LQ is an RV128C-only instruction that loads a 128-bit value from
memory into register <code><em>rd</em></code>. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 16, to the base
address in register <code><em>rs1</em></code>. It expands to
<code>lq rd, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLW is an RV32FC-only instruction that loads a single-precision
floating-point value from memory into floating-point register
<code><em>rd</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 4, to the base address in register
<code><em>rs1</em></code>. It expands to
<code>flw rd, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLD is an RV32DC/RV64DC-only instruction that loads a double-precision
floating-point value from memory into floating-point register
<code><em>rd</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the base address in register
<code><em>rs1</em></code>. It expands to
<code>fld rd, offset(rs1)</code>.</p>
</div>
<div id="c-cs-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp9kj0PgjAQhnd_xW1dGiJFkXTFsBsGB0IiEDAMfKStgwH-uy00opXaoZe3d33uvbQDK-8Ukh3AkNeCUyAY2qwpKaCuRxjUEs9e6gBDJgSTxYjIBAr3CG9s6YRXmPeGMU5uM26BeSvMUzDOCnl9e_8irvbqpln8LURi2OuqipciIaOfSo5WJ2pXG5XWWdx_s-QZLyXIHixYYyATq40dqfdh01DjYQzsWaUsvatHWwjV5uet596hE1_V8zrxeQmXOUT6NJLHCpxiKLq2quWP0h1cf5peDP6tAw==?id=c-cs-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CS format.</p>
</div>
<div class="paragraph">
<p>C.SW stores a 32-bit value in register <code><em>rs2</em></code> to memory.
It computes an effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the base address in register <code><em>rs1</em></code>. It
expands to <code>sw rs2, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.SD is an RV64C/RV128C-only instruction that stores a 64-bit value in
register <code><em>rs2</em></code> to memory. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 8, to the base
address in register <code><em>rs1</em></code>. It expands to
<code>sd rs2, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.SQ is an RV128C-only instruction that stores a 128-bit value in
register <code><em>rs2</em></code> to memory. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 16, to the base
address in register <code><em>rs1</em></code>. It expands to
<code>sq rs2, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSW is an RV32FC-only instruction that stores a single-precision
floating-point value in floating-point register <code><em>rs2</em></code> to
memory. It computes an effective address by adding the <em>zero</em>-extended
offset, scaled by 4, to the base address in register
<code><em>rs1</em></code>. It expands to
<code>fsw rs2, offset(rs1)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSD is an RV32DC/RV64DC-only instruction that stores a
double-precision floating-point value in floating-point register
<code><em>rs2</em></code> to memory. It computes an effective address by
adding the <em>zero</em>-extended offset, scaled by 8, to the base address in
register <code><em>rs1</em></code>. It expands to
<code>fsd rs2, offset(rs1)</code>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="control-transfer-instructions"><a class="anchor" href="#control-transfer-instructions"></a>Control Transfer Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RVC provides unconditional jump instructions and conditional branch
instructions. As with base RVI instructions, the offsets of all RVC
control transfer instructions are in multiples of 2 bytes.</p>
</div>
<div id="c-cj-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBksoCIN9CRyGxpKQIqFjdSF1H3dkQQsTW6iA0GxrCdWfm5oK1QzQbITQbgjTmp6UVp5ZEGxrWmNRYWlnUGBrUmNWY1xhbGdaYxhKUR7HTGG5lWmlecokx0FYMBxuD3KrnBSEdfcAGxOooJOfnpWUCvQ9zvVltLQDC502q?id=c-cj-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CJ format.</p>
</div>
<div class="paragraph">
<p>C.J performs an unconditional control transfer. The offset is
sign-extended and added to the <code>pc</code> to form the jump target address. C.J
can therefore target a &#177;2 KiB range. C.J expands to
<code>jal x0, offset</code>.</p>
</div>
<div class="paragraph">
<p>C.JAL is an RV32C-only instruction that performs the same operation as
C.J, but additionally writes the address of the instruction following
the jump (<code>pc+2</code>) to the link register, <code>x1</code>. C.JAL expands to
<code>jal x1, offset</code>.</p>
</div>
<div id="c-cr-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyLXQUEktKioAK1Y3UddSdgYQCiIyt1UHoNIXrLCoGKQABiHYThHZToHYDkG4D3JoN8WkuLkp-1LkAbASMiWKQCdygtNK85BITkFkYnjABeULPKwjsDT0vR58gsCGxOgrJ-XlpmcAQgZpmaFZbCwCovlGR?id=c-cr-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CR format.</p>
</div>
<div class="paragraph">
<p>C.JR (jump register) performs an unconditional control transfer to the
address in register <em>rs1</em>. C.JR expands to <code>jalr x0, 0(rs1)</code>. C.JR is
only valid when <span class="steminline"> <svg style="vertical-align: -0.486ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="7.373ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 3259 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" transform="translate(451,0)"></path><path data-c="31" d="M248 491Q228 491 228 502Q228 516 236 532Q237 536 246 537T275 541T314 552Q350 567 382 595T430 644L446 664Q450 666 454 666Q468 666 468 658Q468 647 395 359Q321 63 321 59Q321 52 334 50T388 46H422Q428 37 428 35Q428 19 421 5Q416 0 405 0Q400 0 361 1T263 2Q215 2 185 2T142 1T127 0Q110 0 110 11Q110 13 113 25T118 40Q120 46 146 46Q196 46 212 49T235 61Q238 66 295 295L353 526L340 519Q328 512 302 503T248 491Z" transform="translate(920,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1431,0)"><g data-mml-node="mo"><path data-c="2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></g></g><g data-mml-node="mtext" transform="translate(2209,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F6" d="M42 305Q42 450 111 535T257 621Q335 621 390 562Q482 468 482 306Q482 174 418 82T262 -10T106 82T42 305ZM257 545Q209 545 168 481T126 320Q126 220 162 147Q204 65 262 65Q318 65 358 139T398 320V328Q395 411 364 470T284 543Q270 545 257 545Z" transform="translate(525,0)"></path></g></g></g></svg> </span>; the code
point with <span class="steminline"> <svg style="vertical-align: -0.186ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="7.373ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 3259 748"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" transform="translate(451,0)"></path><path data-c="31" d="M248 491Q228 491 228 502Q228 516 236 532Q237 536 246 537T275 541T314 552Q350 567 382 595T430 644L446 664Q450 666 454 666Q468 666 468 658Q468 647 395 359Q321 63 321 59Q321 52 334 50T388 46H422Q428 37 428 35Q428 19 421 5Q416 0 405 0Q400 0 361 1T263 2Q215 2 185 2T142 1T127 0Q110 0 110 11Q110 13 113 25T118 40Q120 46 146 46Q196 46 212 49T235 61Q238 66 295 295L353 526L340 519Q328 512 302 503T248 491Z" transform="translate(920,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1431,0)"><g data-mml-node="mo"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g></g><g data-mml-node="mtext" transform="translate(2209,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F6" d="M42 305Q42 450 111 535T257 621Q335 621 390 562Q482 468 482 306Q482 174 418 82T262 -10T106 82T42 305ZM257 545Q209 545 168 481T126 320Q126 220 162 147Q204 65 262 65Q318 65 358 139T398 320V328Q395 411 364 470T284 543Q270 545 257 545Z" transform="translate(525,0)"></path></g></g></g></svg> </span> is reserved.</p>
</div>
<div class="paragraph">
<p>C.JALR (jump and link register) performs the same operation as C.JR, but
additionally writes the address of the instruction following the jump
(<code>pc</code>+2) to the link register, <code>x1</code>. C.JALR expands to
<code>jalr x1, 0(rs1)</code>. C.JALR is only valid when
<span class="steminline"> <svg style="vertical-align: -0.486ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="7.373ex" height="2.106ex" role="img" focusable="false" viewBox="0 -716 3259 931"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" transform="translate(451,0)"></path><path data-c="31" d="M248 491Q228 491 228 502Q228 516 236 532Q237 536 246 537T275 541T314 552Q350 567 382 595T430 644L446 664Q450 666 454 666Q468 666 468 658Q468 647 395 359Q321 63 321 59Q321 52 334 50T388 46H422Q428 37 428 35Q428 19 421 5Q416 0 405 0Q400 0 361 1T263 2Q215 2 185 2T142 1T127 0Q110 0 110 11Q110 13 113 25T118 40Q120 46 146 46Q196 46 212 49T235 61Q238 66 295 295L353 526L340 519Q328 512 302 503T248 491Z" transform="translate(920,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1431,0)"><g data-mml-node="mo"><path data-c="2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></g></g><g data-mml-node="mtext" transform="translate(2209,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F6" d="M42 305Q42 450 111 535T257 621Q335 621 390 562Q482 468 482 306Q482 174 418 82T262 -10T106 82T42 305ZM257 545Q209 545 168 481T126 320Q126 220 162 147Q204 65 262 65Q318 65 358 139T398 320V328Q395 411 364 470T284 543Q270 545 257 545Z" transform="translate(525,0)"></path></g></g></g></svg> </span>; the code point with
<span class="steminline"> <svg style="vertical-align: -0.186ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="7.373ex" height="1.692ex" role="img" focusable="false" viewBox="0 -666 3259 748"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path data-c="1D460" d="M131 289Q131 321 147 354T203 415T300 442Q362 442 390 415T419 355Q419 323 402 308T364 292Q351 292 340 300T328 326Q328 342 337 354T354 372T367 378Q368 378 368 379Q368 382 361 388T336 399T297 405Q249 405 227 379T204 326Q204 301 223 291T278 274T330 259Q396 230 396 163Q396 135 385 107T352 51T289 7T195 -10Q118 -10 86 19T53 87Q53 126 74 143T118 160Q133 160 146 151T160 120Q160 94 142 76T111 58Q109 57 108 57T107 55Q108 52 115 47T146 34T201 27Q237 27 263 38T301 66T318 97T323 122Q323 150 302 164T254 181T195 196T148 231Q131 256 131 289Z" transform="translate(451,0)"></path><path data-c="31" d="M248 491Q228 491 228 502Q228 516 236 532Q237 536 246 537T275 541T314 552Q350 567 382 595T430 644L446 664Q450 666 454 666Q468 666 468 658Q468 647 395 359Q321 63 321 59Q321 52 334 50T388 46H422Q428 37 428 35Q428 19 421 5Q416 0 405 0Q400 0 361 1T263 2Q215 2 185 2T142 1T127 0Q110 0 110 11Q110 13 113 25T118 40Q120 46 146 46Q196 46 212 49T235 61Q238 66 295 295L353 526L340 519Q328 512 302 503T248 491Z" transform="translate(920,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1431,0)"><g data-mml-node="mo"><path data-c="3D" d="M56 347Q56 360 70 367H707Q722 359 722 347Q722 336 708 328L390 327H72Q56 332 56 347ZM56 153Q56 168 72 173H708Q722 163 722 153Q722 140 707 133H70Q56 140 56 153Z"></path></g></g><g data-mml-node="mtext" transform="translate(2209,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F6" d="M42 305Q42 450 111 535T257 621Q335 621 390 562Q482 468 482 306Q482 174 418 82T262 -10T106 82T42 305ZM257 545Q209 545 168 481T126 320Q126 220 162 147Q204 65 262 65Q318 65 358 139T398 320V328Q395 411 364 470T284 543Q270 545 257 545Z" transform="translate(525,0)"></path></g></g></g></svg> </span> corresponds to the C.EBREAK
instruction.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Strictly speaking, C.JALR does not expand exactly to a base RVI
instruction as the value added to the PC to form the link address is 2
rather than 4 as in the base ISA, but supporting both offsets of 2 and 4
bytes is only a very minor change to the base microarchitecture.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-cb-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kb0KgzAURvc-xd2yBCFGrWRUXAtdlQxWtDj4Q5IORYU-Ux-pT9KkSlTaZrgJ9-YcPpJBlFcG2QFguNRKMnAxtHlTMkBdjzCoe6_PIYZcKaEvIhdhFBM9MZVPeCV9S9ZNY1G6or5Gu6qSpcqOLBhdRkafG9N3cyemViwkeT2eGjFr9nurn2q_FIUxmu2PYw5nebrnlyjh6DG6zbY0OP4trW5toejWG-69sRMl5_TzbE50StLZxDEUXVvV-gsWJQmm6Q00knNb?id=c-cb-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CB format.</p>
</div>
<div class="paragraph">
<p>C.BEQZ performs conditional control transfers. The offset is
sign-extended and added to the <code>pc</code> to form the branch target address.
It can therefore target a &#177;256 B range. C.BEQZ takes the
branch if the value in register <em>rs1</em> is zero. It
expands to <code>beq rs1, x0, offset</code>.</p>
</div>
<div class="paragraph">
<p>C.BNEZ is defined analogously, but it takes the branch if
<em>rs1</em> contains a nonzero value. It expands to
<code>bne rs1, x0, offset</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="integer-computational-instructions"><a class="anchor" href="#integer-computational-instructions"></a>Integer Computational Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>RVC provides several instructions for integer arithmetic and constant
generation.</p>
</div>
<div class="sect2">
<h3 id="integer-constant-generation-instructions"><a class="anchor" href="#integer-constant-generation-instructions"></a>Integer Constant-Generation Instructions</h3>
<div class="paragraph">
<p>The two constant-generation instructions both use the CI instruction
format and can target any integer register.</p>
</div>
<div id="c-integer-const-gen" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kD0PgyAURff-iteJhRiBYhOSTp1MXDsZButH4yAapUNr-O9FrB8MMpBHuO_k5I59-RKQngDGZ60HARSDyppSAGo7hEF_OjszDJnWvQ0iijC6E_sz3dLgbZOvm3XTpBcRSpuyZ0aQDcEtYou4kUSCUHnE64uZ9EdxH1WUg4bzDcJJanmMIQZqfCDxBLmnt2OSv5MLIPV1flcrh_cwtsKqt8o1O4Cxqa4giV1hQfKIZ4zEkLeqqm33i1xkzA9Mqm0O?id=c-integer-const-gen" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.LI loads the sign-extended 6-bit immediate, <em>imm</em>, into register <em>rd</em>.
C.LI expands into <code>addi rd, x0, imm</code>. C.LI is only valid when
<code><em>rd</em>x0</code>; the code points with <code><em>rd</em>=x0</code> encode HINTs.</p>
</div>
<div class="paragraph">
<p>C.LUI loads the non-zero 6-bit immediate field into bits 1712 of the
destination register, clears the bottom 12 bits, and sign-extends bit 17
into all higher bits of the destination. C.LUI expands into
<code>lui rd, imm</code>. C.LUI is only valid when
<span class="steminline"> <svg style="vertical-align: -0.566ex; overflow: visible;" xmlns="http://www.w3.org/2000/svg" width="11.977ex" height="2.262ex" role="img" focusable="false" viewBox="0 -750 5293.7 1000"><g stroke="currentColor" fill="currentColor" stroke-width="0" transform="scale(1,-1)"><g data-mml-node="math"><g data-mml-node="mtext"><path data-c="1D45F" d="M21 287Q22 290 23 295T28 317T38 348T53 381T73 411T99 433T132 442Q161 442 183 430T214 408T225 388Q227 382 228 382T236 389Q284 441 347 441H350Q398 441 422 400Q430 381 430 363Q430 333 417 315T391 292T366 288Q346 288 334 299T322 328Q322 376 378 392Q356 405 342 405Q286 405 239 331Q229 315 224 298T190 165Q156 25 151 16Q138 -11 108 -11Q95 -11 87 -5T76 7T74 17Q74 30 114 189T154 366Q154 405 128 405Q107 405 92 377T68 316T57 280Q55 278 41 278H27Q21 284 21 287Z"></path><path data-c="1D451" d="M366 683Q367 683 438 688T511 694Q523 694 523 686Q523 679 450 384T375 83T374 68Q374 26 402 26Q411 27 422 35Q443 55 463 131Q469 151 473 152Q475 153 483 153H487H491Q506 153 506 145Q506 140 503 129Q490 79 473 48T445 8T417 -8Q409 -10 393 -10Q359 -10 336 5T306 36L300 51Q299 52 296 50Q294 48 292 46Q233 -10 172 -10Q117 -10 75 30T33 157Q33 205 53 255T101 341Q148 398 195 420T280 442Q336 442 364 400Q369 394 369 396Q370 400 396 505T424 616Q424 629 417 632T378 637H357Q351 643 351 645T353 664Q358 683 366 683ZM352 326Q329 405 277 405Q242 405 210 374T160 293Q131 214 119 129Q119 126 119 118T118 106Q118 61 136 44T179 26Q233 26 290 98L298 109L352 326Z" transform="translate(451,0)"></path></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(971,0)"><g data-mml-node="mo"><path data-c="2260" d="M166 -215T159 -215T147 -212T141 -204T139 -197Q139 -190 144 -183L306 133H70Q56 140 56 153Q56 168 72 173H327L406 327H72Q56 332 56 347Q56 360 70 367H426Q597 702 602 707Q605 716 618 716Q625 716 630 712T636 703T638 696Q638 692 471 367H707Q722 359 722 347Q722 336 708 328L451 327L371 173H708Q722 163 722 153Q722 140 707 133H351Q175 -210 170 -212Q166 -215 159 -215Z"></path></g></g><g data-mml-node="TeXAtom" data-mjx-texclass="ORD" transform="translate(1749,0)"><g data-mml-node="mrow"><g data-mml-node="mo"><path data-c="7B" d="M434 -231Q434 -244 428 -250H410Q281 -250 230 -184Q225 -177 222 -172T217 -161T213 -148T211 -133T210 -111T209 -84T209 -47T209 0Q209 21 209 53Q208 142 204 153Q203 154 203 155Q189 191 153 211T82 231Q71 231 68 234T65 250T68 266T82 269Q116 269 152 289T203 345Q208 356 208 377T209 529V579Q209 634 215 656T244 698Q270 724 324 740Q361 748 377 749Q379 749 390 749T408 750H428Q434 744 434 732Q434 719 431 716Q429 713 415 713Q362 710 332 689T296 647Q291 634 291 499V417Q291 370 288 353T271 314Q240 271 184 255L170 250L184 245Q202 239 220 230T262 196T290 137Q291 131 291 1Q291 -134 296 -147Q306 -174 339 -192T415 -213Q429 -213 431 -216Q434 -219 434 -231Z"></path></g><g data-mml-node="mtext" transform="translate(500,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F6" d="M42 305Q42 450 111 535T257 621Q335 621 390 562Q482 468 482 306Q482 174 418 82T262 -10T106 82T42 305ZM257 545Q209 545 168 481T126 320Q126 220 162 147Q204 65 262 65Q318 65 358 139T398 320V328Q395 411 364 470T284 543Q270 545 257 545Z" transform="translate(525,0)"></path></g><g data-mml-node="mo" transform="translate(1550,0)"><path data-c="2C" d="M78 35T78 60T94 103T137 121Q165 121 187 96T210 8Q210 -27 201 -60T180 -117T154 -158T130 -185T117 -194Q113 -194 104 -185T95 -172Q95 -168 106 -156T131 -126T157 -76T173 -3V9L172 8Q170 7 167 6T161 3T152 1T140 0Q113 0 96 17Z"></path></g><g data-mml-node="mtext" transform="translate(1994.7,0)"><path data-c="1D6A1" d="M35 393Q35 417 46 424T89 432Q95 432 112 432T141 431H223Q238 422 241 415T244 393Q244 389 244 383T237 367T216 355Q209 355 209 354L234 319Q259 286 260 286L308 354Q308 355 301 355Q285 356 278 365T270 384L271 393Q271 420 289 428Q295 431 376 431H459Q460 430 465 427T472 422T476 416T480 407T481 393Q481 368 470 362T434 355H425H392L344 290Q295 225 295 223Q294 223 309 203T350 149L405 77L439 76H453Q474 76 484 69T495 38Q495 10 473 1H303Q281 9 281 32V38Q281 49 282 54T290 67T313 76Q324 76 324 77L259 173L197 77Q202 76 209 76Q225 75 233 68T241 55T242 38Q242 28 242 24T236 12T221 1H51Q29 9 29 32V38Q29 48 29 51T31 59T38 67T51 76H117L171 149Q224 222 224 223L124 355H90H78Q54 355 45 361T35 393Z"></path><path data-c="1D7F8" d="M52 462Q52 528 110 575T247 622H250Q343 622 407 565T472 421Q472 371 446 324T390 248T308 178Q307 177 275 151T214 101L185 77Q185 76 286 76H388V87Q388 105 397 114T430 123T463 114Q470 107 471 100T472 61V42Q472 24 468 16T450 1H75Q53 10 53 32V38V48Q53 57 63 67T127 122Q153 144 169 157L289 256Q388 345 388 419Q388 473 346 509T231 545H224Q176 545 146 499L144 494Q155 476 155 459Q154 459 155 455T154 444T148 430T136 417T114 408Q113 408 110 408T104 407Q80 407 66 422T52 462Z" transform="translate(525,0)"></path></g><g data-mml-node="mo" transform="translate(3044.7,0)"><path data-c="7D" d="M65 731Q65 745 68 747T88 750Q171 750 216 725T279 670Q288 649 289 635T291 501Q292 362 293 357Q306 312 345 291T417 269Q428 269 431 266T434 250T431 234T417 231Q380 231 345 210T298 157Q293 143 292 121T291 -28V-79Q291 -134 285 -156T256 -198Q202 -250 89 -250Q71 -250 68 -247T65 -230Q65 -224 65 -223T66 -218T69 -214T77 -213Q91 -213 108 -210T146 -200T183 -177T207 -139Q208 -134 209 3L210 139Q223 196 280 230Q315 247 330 250Q305 257 280 270Q225 304 212 352L210 362L209 498Q208 635 207 640Q195 680 154 696T77 713Q68 713 67 716T65 731Z"></path></g></g></g></g></g></svg> </span>,
and when the immediate is not equal to zero. The code points with
<em>imm</em>=0 are reserved; the remaining code points with <em>rd</em>=<code>x0</code> are
HINTs; and the remaining code points with <em>rd</em>=<code>x2</code> correspond to the
C.ADDI16SP instruction.</p>
</div>
</div>
<div class="sect2">
<h3 id="integer-register-immediate-operations"><a class="anchor" href="#integer-register-immediate-operations"></a>Integer Register-Immediate Operations</h3>
<div class="paragraph">
<p>These integer register-immediate operations are encoded in the CI format
and perform operations on an integer register and a 6-bit immediate.</p>
</div>
<div id="c-integer-register-immediate" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kbsOgjAUhnef4jh1aZRSi9rEwcjiZuLgQDqggGHgklIHBd7dcrGACR2a0_bPd76cljJ8cvAWAOU9VgUHG0PqJyEHlOUIQ7_UO9dXFIOvlNR5ZCOMTkQHhl3UeMAwg4mTxNtw0bA6ChkoTFPST5ewmgga1_1L5VQ7vq2YmOsgg7UsSCfbtWDTFkFYKFgewGqok4M9ZZKJNRMzTGK0mZFmI-X9nyo12OiVPhSdwdJmpquj657bibbVbSiJc720XIHhkaVRrD_u5-3U9RdfpH0w?id=c-integer-register-immediate" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.ADDI adds the non-zero sign-extended 6-bit immediate to the value in
register <em>rd</em> then writes the result to <em>rd</em>. C.ADDI expands into
<code>addi rd, rd, imm</code>. C.ADDI is only valid when
<code><em>rd</em>x0</code> and <code><em>imm</em>0</code>. The code
points with <code><em>rd</em>=x0</code> encode the C.NOP instruction; the remaining code
points with <em>imm</em>=0 encode HINTs.</p>
</div>
<div class="paragraph">
<p>C.ADDIW is an RV64C/RV128C-only instruction that performs the same
computation but produces a 32-bit result, then sign-extends result to 64
bits. C.ADDIW expands into <code>addiw rd, rd, imm</code>. The immediate can be
zero for C.ADDIW, where this corresponds to <code>sext.w rd</code>. C.ADDIW is
only valid when <code><em>rd</em>x0</code>; the code points with
<code><em>rd</em>=x0</code> are reserved.</p>
</div>
<div class="paragraph">
<p>C.ADDI16SP shares the opcode with C.LUI, but has a destination field of
<code>x2</code>. C.ADDI16SP adds the non-zero sign-extended 6-bit immediate to the
value in the stack pointer (<code>sp=x2</code>), where the immediate is scaled to
represent multiples of 16 in the range (-512,496). C.ADDI16SP is used to
adjust the stack pointer in procedure prologues and epilogues. It
expands into <code>addi x2, x2, nzimm[9:4]</code>. C.ADDI16SP is only valid when
<em>nzimm</em>0; the code point with <em>nzimm</em>=0 is reserved.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the standard RISC-V calling convention, the stack pointer <code>sp</code> is
always 16-byte aligned.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-ciw" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyjXUUEktKioAK1Y3UddSdDdRjdWp1EJqM4ZqKUh41bALqAwGIXlOEXmOg3pTU4hI03RZw3Zm5uRC9GFotgFrzqkqBCqJNrUxqLK3MaoxqjGPVY7E7I600L7nEGIdZIGc46zm6uHiaBAf4gY2I1VFIzs9LywSGBdQsQ7PaWgCbllHr?id=c-ciw" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
C.ADDI4SPN is a CIW-format instruction that adds a <em>zero</em>-extended
non-zero immediate, scaled by 4, to the stack pointer, <code>x2</code>, and writes
the result to <code>rd</code>. This instruction is used to generate
pointers to stack-allocated variables, and expands to
<code>addi rd, x2, nzuimm[9:2]</code>. C.ADDI4SPN is only valid when
<em>nzuimm</em>0; the code points with <em>nzuimm</em>=0 are
reserved.</p>
</div>
<div id="c-ci" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyjXUUEktKioAK1Y2AgurORuqxtToITaZwTcUZibkl0SZWBrFAdUAA0W-I0G8K0o-kCoc5RSn6RcWGEDOghpiiGZKSWlyioGirYIBqhiGaW0xRXIJkiCHCJaZo7jCGm5FWmpdcYozDBGNwWOgF-_h4gvXH1gIAcqhdLQ==?id=c-ci" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.SLLI is a CI-format instruction that performs a logical left shift of
the value in register <em>rd</em> then writes the result to <em>rd</em>. The shift
amount is encoded in the <em>shamt</em> field. For RV128C, a shift amount of
zero is used to encode a shift of 64. C.SLLI expands into
<code>slli rd, rd, shamt[5:0]</code>, except for RV128C with <code>shamt=0</code>, which expands to
<code>slli rd, rd, 64</code>.</p>
</div>
<div class="paragraph">
<p>For RV32C, <em>shamt[5]</em> must be zero; the code points with <em>shamt[5]</em>=1
are designated for custom extensions. For RV32C and RV64C, the shift
amount must be non-zero; the code points with <em>shamt</em>=0 are HINTs. For
all base ISAs, the code points with <code><em>rd</em>=x0</code> are HINTs, except those
with <em>shamt[5]</em>=1 in RV32C.</p>
</div>
<div id="c-srli-srai" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyjXUUEktKioAK1Y3UddSdDYEyIDJWp1YHodUUrrU4IzG3JNrEyiAWqBAIIKYYIkwxBZqCogiZh2qqMdzUopRHDZv0i4oNgRTEXKjBpgiDjYEGp6QWl4CMBNOohiF8l1aal1xihOw8UzRP6gUH-XiCPQpkOXqimWSI5lnTWBxmGcK9aorkUVPc3gS7zBiHacY4XRZbCwC-RYG7?id=c-srli-srai" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.SRLI is a CB-format instruction that performs a logical right shift of
the value in register <em>rd</em> then writes the result to
<em>rd</em>. The shift amount is encoded in the <em>shamt</em> field.
For RV128C, a shift amount of zero is used to encode a shift of 64.
Furthermore, the shift amount is sign-extended for RV128C, and so the
legal shift amounts are 1-31, 64, and 96-127. C.SRLI expands into
<code>srli rd, rd, shamt</code>, except for
RV128C with <code>shamt=0</code>, which expands to
<code>srli rd, rd, 64</code>.</p>
</div>
<div class="paragraph">
<p>For RV32C, <em>shamt[5]</em> must be zero; the code points with <em>shamt[5]</em>=1
are designated for custom extensions. For RV32C and RV64C, the shift
amount must be non-zero; the code points with <em>shamt</em>=0 are HINTs.</p>
</div>
<div class="paragraph">
<p>C.SRAI is defined analogously to C.SRLI, but instead performs an
arithmetic right shift. C.SRAI expands to
<code>srai rd, rd, shamt</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Left shifts are usually more frequent than right shifts, as left shifts
are frequently used to scale address values. Right shifts have therefore
been granted less encoding space and are placed in an encoding quadrant
where all other immediates are sign-extended. For RV128, the decision
was made to have the 6-bit shift-amount immediate also be sign-extended.
Apart from reducing the decode complexity, we believe right-shift
amounts of 96-127 will be more useful than 64-95, to allow extraction of
tags located in the high portions of 128-bit address pointers. We note
that RV128C will not be frozen at the same point as RV32C and RV64C, to
allow evaluation of typical usage of 128-bit address-space codes.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-andi" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCCksoCINdURyGxpKQIqFbdSF1H3dlQPVanVgehzxSuLzM3N9rEyiAWh25ToG64klhkI4zhRhSlPGrYpF9UbAikcBhjDDQmJbW4BM0ZCOenleYllxhBdOPwg56jn4snmgGGKP4wRfGFIUK_IdQXQAWo-o1RHQB0Jna3I1seWwsA5W1ucA==?id=c-andi" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.ANDI is a CB-format instruction that computes the bitwise AND of the
value in register <em>rd</em> and the sign-extended 6-bit
immediate, then writes the result to <em>rd</em>. C.ANDI
expands to <code>andi rd, rd, imm</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="integer-register-register-operations"><a class="anchor" href="#integer-register-register-operations"></a>Integer Register-Register Operations</h3>
<div id="c-cr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBksoCIN9CRyGxpKQIqFjdCCih7gwjY3VqdRD6TeH6i4qNIAZA9Jsg9JuCdBYXJT_qXGCAzMRpUop-UbEhUCXEJHM0k1JSi0tgRsHZqGaZwM1KK81LLjGBm4XkKxOwf_R8wyC0o4sLxJBYHYXk_Ly0TGA4QU0zNKutBQChdlqm?id=c-cr" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
These instructions use the CR format.</p>
</div>
<div class="paragraph">
<p>C.MV copies the value in register <em>rs2</em> into register <em>rd</em>. C.MV expands
into <code>add rd, x0, rs2</code>. C.MV is only valid when
<code>rs2x0</code> the code points with <code>rs2=x0</code> correspond to the C.JR instruction. The code points with <code>rs2x0</code> and <code>rd=x0</code> are HINTs.</p>
</div>
<div class="admonitionblock tip">
<table>
<tr>
<td class="icon">
<i class="fa icon-tip" title="Tip"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>C.MV expands to a different instruction than the canonical MV
pseudoinstruction, which instead uses ADDI. Implementations that handle
MV specially, e.g. using register-renaming hardware, may find it more
convenient to expand C.MV to MV instead of ADD, at slight additional
hardware cost.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>C.ADD adds the values in registers <em>rd</em> and <em>rs2</em> and writes the result
to register <em>rd</em>. C.ADD expands into <code>add rd, rd, rs2</code>. C.ADD is only
valid when <code>rs2x0</code> the code points with <code>rs2=x0</code> correspond to the C.JALR
and C.EBREAK instructions. The code points with <code>rs2x0</code> and rd=x0 are HINTs.</p>
</div>
<div id="c-ca" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBksoCIN9CRyGxpKQIqFjdCCih7mxIgIzVqdVBmGsMN7eo2OhRwyaI2RCjTRBGG4M0FxclE0OhWoBweFppXnIJyI04HK7n6OcCYfgHQegIGCM41AmqxMUlHC4UjtsvKUCv6BcVG0J8BLHQHM07KanFJUTTqDaZoXrKDJunzCjyVGwtAC8zib0=?id=c-ca" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CA format.</p>
</div>
<div class="paragraph">
<p><code>C.AND</code> computes the bitwise <code>AND</code> of the values in registers
<em>rd</em> and <em>rs2</em>, then writes the result
to register <em>rd</em>. <code>C.AND</code> expands into
<strong><code><em>and rd, rd, rs2</em></code></strong>.</p>
</div>
<div class="paragraph">
<p><code>C.OR</code> computes the bitwise <code>OR</code> of the values in registers
<em>rd</em> and <em>rs2</em>, then writes the result
to register <em>rd</em>. <code>C.OR</code> expands into
<strong><code><em>or rd&#8242;, rd&#8242;, rs2&#8242;</em></code></strong>.</p>
</div>
<div class="paragraph">
<p><code>C.XOR</code> computes the bitwise <code>XOR</code> of the values in registers
<em>rd</em> and <em>rs2</em>, then writes the result
to register <em>rd</em>. <code>C.XOR</code> expands into
<strong><code><em>xor rd, rd, rs2</em></code></strong>.</p>
</div>
<div class="paragraph">
<p><code>C.SUB</code> subtracts the value in register <em>rs2</em> from the
value in register <em>rd</em>, then writes the result to
register <em>rd</em>. <code>C.SUB</code> expands into
<strong><code><em>sub rd, rd, rs2</em></code></strong>.</p>
</div>
<div class="paragraph">
<p><code>C.ADDW</code> is an RV64C/RV128C-only instruction that adds the values in
registers <em>rd</em> and <em>rs2</em>, then
sign-extends the lower 32 bits of the sum before writing the result to
register <em>rd</em>. <code>C.ADDW</code> expands into
<strong><code><em>addw rd, rd, rs2</em></code></strong>.</p>
</div>
<div class="paragraph">
<p><code>C.SUBW</code> is an RV64C/RV128C-only instruction that subtracts the value in
register <em>rs2</em> from the value in register
<em>rd</em>, then sign-extends the lower 32 bits of the
difference before writing the result to register <em>rd</em>.
<code>C.SUBW</code> expands into <strong><code><em>subw rd, rd, rs2</em></code></strong>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This group of six instructions do not provide large savings
individually, but do not occupy much encoding space and are
straightforward to implement, and as a group provide a worthwhile
improvement in static and dynamic compression.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="defined-illegal-instruction"><a class="anchor" href="#defined-illegal-instruction"></a>Defined Illegal Instruction</h3>
<div id="c-def-illegal-inst" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlA3UNdRKKksADItdBQSS0qKgOrUjdR1gBKxOrU6CC2mWLSYILSYEqnFAr8WQ_xaDLFoMcavxRihJVZHITk_Ly0TGBYw68xqawH8Ok1i?id=c-def-illegal-inst" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>A 16-bit instruction with all bits zero is permanently reserved as an
illegal instruction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We reserve all-zero instructions to be illegal instructions to help trap
attempts to execute zero-ed or non-existent portions of the memory
space. The all-zero value should not be redefined in any non-standard
extension. Similarly, we reserve instructions with all bits set to 1
(corresponding to very long instructions in the RISC-V variable-length
encoding scheme) as illegal to capture another common value seen in
non-existent memory regions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="nop-instruction"><a class="anchor" href="#nop-instruction"></a>NOP Instruction</h3>
<div id="c-nop-instr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyLXQUEktKioAK1Y3UddSdDdVjdWp1EJpM4Zoyc3OjTawMYuFaTRBaTYFaDXDqLErRLyo2xGYlNn2GKDaaxmLTZ4hFnzFcX1ppXnKJMTZ9xiAv6vn5B0D0xtYCAAHLUXM=?id=c-nop-instr" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><code>C.NOP</code> is a CI-format instruction that does not change any user-visible
state, except for advancing the <code>pc</code> and incrementing any applicable
performance counters. <code>C.NOP</code> expands to <code>nop</code>. <code>C.NOP</code> is only valid when
<em>imm</em>=0; the code points with <em>imm</em>0 encode HINTs.</p>
</div>
</div>
<div class="sect2">
<h3 id="breakpoint-instruction"><a class="anchor" href="#breakpoint-instruction"></a>Breakpoint Instruction</h3>
<div id="c-breakpoint-instr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUSipLACyLXQUEktKioAK1Y3UddSdjdRjdWp1EJoMDeC6DOCaTBCaDIGiQBlUTSZwPWmlecklJthsMwHZpufqFOTq6A3RHqujkJyfl5YJdDXMcrPaWgCT3ze7?id=c-breakpoint-instr" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Debuggers can use the <code>C.EBREAK</code> instruction, which expands to <code>ebreak</code>,
to cause control to be transferred back to the debugging environment.
<code>C.EBREAK</code> shares the opcode with the <code>C.ADD</code> instruction, but with <em>rd</em> and
<em>rs2</em> both zero, thus can also use the <code>CR</code> format.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="usage-of-c-instructions-in-lrsc-sequences"><a class="anchor" href="#usage-of-c-instructions-in-lrsc-sequences"></a>Usage of C Instructions in LR/SC Sequences</h2>
<div class="sectionbody">
<div class="paragraph">
<p>On implementations that support the C extension, compressed forms of the
I instructions permitted inside constrained LR/SC sequences, as
described in <a href="#sec:lrscseq">[sec:lrscseq]</a>, are also permitted
inside constrained LR/SC sequences.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The implication is that any implementation that claims to support both
the A and C extensions must ensure that LR/SC sequences containing valid
C instructions will eventually complete.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
</div>
<div class="sect1">
<h2 id="rvc-hints"><a class="anchor" href="#rvc-hints"></a>HINT Instructions</h2>
<div class="sectionbody">
<div class="paragraph">
<p>A portion of the RVC encoding space is reserved for microarchitectural
HINTs. Like the HINTs in the RV32I base ISA (see
<a href="#rv32i-hints">[rv32i-hints]</a>), these instructions do not
modify any architectural state, except for advancing the <code>pc</code> and any
applicable performance counters. HINTs are executed as no-ops on
implementations that ignore them.</p>
</div>
<div class="paragraph">
<p>RVC HINTs are encoded as computational instructions that do not modify
the architectural state, either because <em>rd</em>=<code>x0</code> (e.g.
<code>C.ADD <em>x0</em>, <em>t0</em></code>), or because <em>rd</em> is overwritten with a copy of itself
(e.g. <code>C.ADDI <em>t0</em>, 0</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This HINT encoding has been chosen so that simple implementations can
ignore HINTs altogether, and instead execute a HINT as a regular
computational instruction that happens not to mutate the architectural
state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RVC HINTs do not necessarily expand to their RVI HINT counterparts. For
example, <code>C.ADD</code> <em>x0</em>, <em>a0</em> might not encode the same HINT as
<code>ADD</code> <em>x0</em>, <em>x0</em>, <em>a0</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The primary reason to not require an RVC HINT to expand to an RVI HINT
is that HINTs are unlikely to be compressible in the same manner as the
underlying computational instruction. Also, decoupling the RVC and RVI
HINT mappings allows the scarce RVC HINT space to be allocated to the
most popular HINTs, and in particular, to HINTs that are amenable to
macro-op fusion.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#rvc-t-hints">Table 32</a> lists all RVC HINT code points. For RV32C, 78%
of the HINT space is reserved for standard HINTs. The remainder of the HINT space is designated for custom HINTs;
no standard HINTs will ever be defined in this subspace.</p>
</div>
<table id="rvc-t-hints" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. RVC HINT instructions.</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Instruction</th>
<th class="tableblock halign-left valign-top">Constraints</th>
<th class="tableblock halign-right valign-top">Code Points</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.NOP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>imm</em>0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-middle" rowspan="6"><p class="tableblock"><em>Designated for future standard use</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADDI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em><code>x0</code>, <em>imm</em>=0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.LI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.LUI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>imm</em>0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">63</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.MV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em><code>x0</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em><code>x0</code>, <em>rs2</em><code>x2-x5</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">27</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em><code>x2-x5</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(rs2=x2) C.NTL.P1 (rs2=x3) C.NTL.PALL (rs2=x4) C.NTL.S1 (rs2=x5) C.NTL.ALL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SLLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>imm</em>0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31 (RV32), 63 (RV64/128)</p></td>
<td class="tableblock halign-left valign-middle" rowspan="5"><p class="tableblock"><em>Designated for custom use</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SLLI64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<em>x0</em></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">1</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SLLI64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em><code>x0</code>, RV32 and RV64 only</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SRLI64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV32 and RV64 only</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SRAI64</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RV32 and RV64 only</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="sect1">
<h2 id="rvc-instruction-set-listings"><a class="anchor" href="#rvc-instruction-set-listings"></a>RVC Instruction Set Listings</h2>
<div class="sectionbody">
<div class="paragraph">
<p><a href="#rvcopcodemap">RVC opcode map instructions.</a> shows a map of the major
opcodes for RVC. Each row of the table corresponds to one quadrant of
the encoding space. The last quadrant, which has the two
least-significant bits set, corresponds to instructions wider than 16
bits, including those in the base ISAs. Several instructions are only
valid for certain operands; when invalid, they are marked either <em>RES</em>
to indicate that the opcode is reserved for future standard extensions;
<em>Custom</em> to indicate that the opcode is designated for custom
extensions; or <em>HINT</em> to indicate that the opcode is reserved for
microarchitectural hints (see <a href="#rvc-hints">Section 18.7</a>).</p>
</div>
<div style="page-break-after: always;"></div>
<table id="rvcopcodemap" class="tableblock frame-all grid-all fit-content center">
<caption class="title">Table 4. RVC opcode map instructions.</caption>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" colspan="2"><p class="tableblock">inst[15:13]<br>
inst[1:0]</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>000</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>001</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>010</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>011</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>100</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>101</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>110</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>111</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ADDI4SPN</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLD<br>
FLD<br>
LQ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLW<br>
LD<br>
LD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><em>Reserved</em></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSD<br>
FSD<br>
SQ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSW<br>
SD<br>
SD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64<br>
RV128</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">01</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ADDI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">JAL<br>
ADDIW<br>
ADDIW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LUI/ADDI16SP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">MISC-ALU</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">J</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">BEQZ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">BNEZ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64<br>
RV128</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">10</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SLLI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLDSP<br>
FLDSP<br>
LQSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LWSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLWSP<br>
LDSP<br>
LDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">J[AL]R/MV/ADD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSDSP<br>
FSDSP<br>
SQSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SWSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSWSP<br>
SDSP<br>
SDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64<br>
RV128</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">11</p></td>
<td class="tableblock halign-center valign-top" colspan="9"><p class="tableblock">&gt;16b</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#rvc-instr-table0">Instruction listing for RVC, Quadrant 0</a>, <a href="#rvc-instr-table1">Instruction listing for RVC, Quadrant 1</a>, and <a href="#rvc-instr-table2">Instruction listing for RVC, Quadrant 2</a> list the RVC instructions.</p>
</div>
<div id="rvc-instr-table0" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrdVd1u2jAUvt9THPkKtHnFSQg00i6msUqVumkDab1AXJjEgDUnQbbpzwrSnmmP1CfpMSO0MNC6BiSGlKNI5_fz55-vkogBt1YbiMaKywy6i_9dNMgzSwc8leoWyKfXwMZwxpXq8_g7mfWqrypYCjq_piMhhyMLfh1WnDwRmg4yyKRa-JUYWJpyPcT-tSLX1RbOoPD28xth6BgbYC_wfOfW_JrGuZqk2aK5QZCK94UyUNHiCh0CuoTAhq-GxtA8NB8tQKujhWgNtCbaqcuZJ7pM5lKZy2UumdVJrzorYCA87FnD5LvIjHkGPkQ438qYK8qVHGZAUpkkSpC1mmVFc1vAX5-yjHgrkYoVNxbIuVJiyBXIzFg9ia3MM1JsnrG3SgCRFiHFiKRo1IDIFVOexaNcAzGWa0sg6uf6N60znLR1qav4JjJNu_UomJ5G4dSb-r0tK1zA1cn9z1_k-afshax8ePu-1ToPOl8-47JSbkc40Uz6QNofO2_AYX5XI70yhLC_EPKEiLUEbdicg43RBf55k0YU9h73Uv4QwMLHTfTWuibbmz6DrrOL1hpTlfY33zsJg-p-eQqmzf-LqYuvfxLFvGY5mlht_8fJm-6dJEfPJSlBAzsKGp7cqstNt6rkWTmyp2fTyxMGJ2XvFNuuWZTSZYixf8PbFkboK5EQ2LnKssMTFeOVO_-dvagKO0RVKUlVZw-ywg5PVl7GkuOnhK6ww9OV0hdr98LC2LE9P52dKcsDMNvEAA==?id=rvc-instr-table0" alt="Instruction listing for RVC, Quadrant 0">
</div>
<div class="title">Figure 1. Instruction listing for RVC, Quadrant 0</div>
</div>
<div id="rvc-instr-table1" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrVWM1u2kAQvucpVj6BihuPMQYc5UB-qiZKSQtNWxVxMNgEq_5BaxMSxUi99i36DD01rxD1KfIknTUumCA7JcZJLDFC2p1Z-_vmmxnbBU0fqJ5HXaKMTNWwSSf8v1YGju3xE904H3qE6zmmxpHZ2kC1DPOKcO9eERiRN6pp9tT-N27aLW4V8DhCnQk_nMVVBLK0qGo65Qc2sQ0zXDf1gcdbKj3Hawr_fFns_cWec6m7_Ajj8SgC9cUyPzE0b0iqgSdVJ3zfMceWHV7ORSim2tNNlxSofoELOulwHAl_AhqgiWhlNAmtgiajVdFqaHXmEzgyT2CuwHyBOUOF6xanxa3w2ng_eKiA3teKO1JtUp4Wo1uGZXUq3fkuLO8uwiqrYZIidOP2BZjviEs7BU-_xPztv26evscEWioy1VHccY9whbdHzY8lgkfvCkUEMb9jorAgXrX7Q4cSzvVU6mFsz6EzPqdrwy0u8EZ3qQvbVLv78TND3I2Dg6PsgEMScABf8utKzQfBl_2qX1bAj-Ye1sVy3Di5D6X1qSxmiSFeq0-VvM-rkGVpG8TaDmkdtkuEammzCI-sVqr9-b2bIfqTGOFuAHFizuuxiMVEsCjymlKNSvxRCQe5vdKqgkxvoGBjgYd3EJRtNQAwm3_BaGGVmqSBa6GEgJK4AVkBMY0Uzo7iKdkhG9IFxDby8EbGi4L4P3oiB4or7eP2BhvI7U2cFMfpK6jdWq0h1jHJ_tj1HKtEQkC7kBFvkYm-QWaEdIzI0ions36K1GzLUiCnlyYkeGYhNV6skOCZhNR4ViE9MJshRXk9Wi5sgDXZ4-ZT5h_S5D-BJfHu-6_YuAQG2md7OSIANk_Al9NWfgiADBSQK_wZCAB7QCYEQC5awGJCnO0lvbux6YnPsFmNB8hFu4i--OSLLJ7n1-8pCUEPUdTSXZ1e6Nr8kdH1rkwdh7Wnmkafm-aBF8gZL0_ydYt910rRLpM_3tR8SSl34zyw4BOKlsVXFdkXl4Gt8TC4d_jhaxpo8IKhNQ_Xg_YXHyaL3w==?id=rvc-instr-table1" alt="Instruction listing for RVC, Quadrant 1">
</div>
<div class="title">Figure 2. Instruction listing for RVC, Quadrant 1</div>
</div>
<div id="rvc-instr-table2" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrNVs1u2kAQvucpRnvCaly8xhjiKAcaiJqWVC2u6AFxWLAJVv2Ddk1JG3iAvkWfrU_SMdgiEAxJbNNIjJBmvx3P9-3M7pQse8TCkAswJi5zfOjF__fGKPBDecQ8x_0J5OYN0AlcMdcdsOF3suhLJyXcCjyYyWPbuR2HUFVgw8ksm8sjH3zHjf2uPQplj_FbjK8k2Ghv4tQS7yC4s4U8wQAYC1R17ZZnjhWOobZEcjaTh4E79fz4ewLzdtnAdgWUuP0DHTb0CIHtn4JG0VS0CpqGVkXT0WpodbSzCLMERkgaQWmEpRGYVklfWkgncRKYGAZVEH1viAnzobKQHiyVQvsuBDJ1PK9X7ZNEXOH8soHqCynZRTd2ES5omVt_f_9Zx61uIpYRNUPppwHoequ6K6XLt2a7fU3A8Biq2jPEdACk9P7609dT4NaFcg6dbkWFy6kIA-8UYgYXVEL6SWAdjCiYzPzhOOBARMh4iCEHAV8dyeLJQpH1wrO1ULJpoGvbKnS6VK2vBCjrGkSinMNamowS0JxrxTpQI5V53dAz1MlVu2l-fizRUpvXJsXhlpmfZRKj_WWXFqtyaZl51AdVji-Koc5r2WT5tkOWnPQ4dr9k1eJqpxjYL69NhyfURda7Y_fVoWvlHDuGvuxRKehF-dDZ3QeC_g-ae8-YC3Xf8mGuN930-aEorjSNa46HidRa7zqtxkdyVAa5F2VUjo125-gsygXXXaPZLKzw0m7Z-H7dvhH1R9QyPBxmQYPWYVZbY1GerMy0iSkbpdQxKaG09YznQCkis3zaX540PXrSD6qriLHkMKUCG8bcM108l9U_Nds6Ew==?id=rvc-instr-table2" alt="Instruction listing for RVC, Quadrant 2">
</div>
<div class="title">Figure 3. Instruction listing for RVC, Quadrant 2</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="zfinx.html">Chapter 25. "Zfinx", "Zdinx", "Zhinx", "Zhinxmin" Extensions for Floating-Point in Integer Registers, Version 1.0</a></span>
  <span class="next"><a href="zc.html">Chapter 27. "Zc*" Extension for Code Size Reduction, Version 1.0.0</a></span>
</nav>
</article>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
                  <ul class="nav-versions">
                      <li class="component">
                        <div>
                          <a class="title" href="../../index.html">ISA Specifications</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Published
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../../unpriv/c-st-ext.html">
      Latest
    </a>
  </li>
  <li class="version">
    <a href="c-st-ext.html">
      Version: 20240411
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                  </ul>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="footer flex">
    <div id="RISC-V footer">
        <p class="smallest antialiased">Copyright  2025 - <script>var d = new Date();
        document.write(d.getFullYear());</script> This document is released under a Creative Commons Attribution 4.0 International License.<span id="teconsent"></span></p>
    
    </div>

</footer>
<script src="../../../_/js/vendor/import.js"></script>
<script src="../../../_/js/site.js"></script>
<script async src="../../../_/js/vendor/highlight.js"></script>
<script async src="../../../_/js/vendor/spring-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
