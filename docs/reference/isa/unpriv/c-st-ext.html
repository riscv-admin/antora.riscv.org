<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Untitled :: RISC-V Ratified Specifications Library</title>
    <link rel="prev" href="zfinx.html">
    <link rel="next" href="zc.html">
    <meta name="generator" content="Antora 3.1.12">
    <script>
!function (theme, navWidth) {
  if (theme === 'dark') document.documentElement.classList.add('dark-theme')
  if (navWidth) document.documentElement.style.setProperty('--nav-width', `${navWidth}px`)
}(localStorage && localStorage.getItem('theme') || (matchMedia('(prefers-color-scheme: light)')?.matches && 'light'),
  localStorage && localStorage.getItem('nav-width'))
    </script>
    <link rel="stylesheet" href="../../_/css/site.css">
    <link rel="stylesheet" href="../../_/css/vendor/search.css">
    <link rel="stylesheet" href="../../_/css/vendor/page-search.css">
    <link rel="stylesheet" href="../../_/css/vendor/spring-tabs.css">

    <meta name="antora-ui-version" content="1ea0d9f81bc80a15c1f560d76c5d8bddea1856e2"> 
    <meta name="version" content="">
    <meta name="component" content="isa">
    <meta name="latest-version" content="false">
    <link rel="icon" href="../../_/favicon.ico" type="image/x-icon">
  </head>
  <body class="article">


<header class="header" id="antora-header">
    <nav class="navbar">
        <head>
            <link data-rh="true" rel="icon" href="/img/favicon.ico">
            <link data-rh="true" rel="canonical" href="https://developer.riscv.org/ref">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="en">
            <link data-rh="true" rel="alternate" href="https://developer.riscv.org/ref" hreflang="x-default">
            <link data-rh="true" rel="preconnect" href="https://MGVPU7BN22-dsn.algolia.net" crossorigin="anonymous">
            <link rel="stylesheet" type="text/css" href="/docs/reference/_/docusaurus-styles-copy-08-25.css">

        </head>
        <script>
            !function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())
        </script>
            <link rel="preload" as="image" href="/img/logo.svg">
            <div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div>
            <div class="announcementBar_mb4j" role="banner">
                <div class="announcementBarPlaceholder_vyr4"></div>
                <div class="content_knG7 announcementBarContent_xLdY">congratulations, you found the RISC-V Developer Portal! ðŸŽ‰ . This site is under active development and not meant for public consumption yet.</div><button type="button" aria-label="Close" class="clean-btn close closeButton_CVFx announcementBarClose_gvF7"><svg viewBox="0 0 15 15" width="14" height="14"><g stroke="currentColor" stroke-width="3.1"><path d="M.75.75l13.5 13.5M14.25.75L.75 14.25"></path></g></svg></button></div>
            <nav aria-label="Main" class="navbar ">
                <div class="navbar__inner">
                    <div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button>
                        <a class="navbar__brand" href="/">
                            <div class="navbar__logo"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="RISC-V Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Home</b></a>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Specifications</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/isa">ISA</a></li>
                                <li><a class="dropdown__link" href="/docs/spec/profiles">Profiles</a></li>
                                <li><a class="dropdown__link" docid="spec/non-isa" href="/docs/spec/non-isa">Non-ISA</a></li>
                            </ul>
                        </div>
                        <div class="navbar__item dropdown dropdown--hoverable"><a href="#" aria-haspopup="true" aria-expanded="false" role="button" class="navbar__link">Developers</a>
                            <ul class="dropdown__menu">
                                <li><a class="dropdown__link" href="/docs/spec/intro">Specification Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/hardware/overview">Hardware Developers</a></li>
                                <li><a class="dropdown__link" href="/docs/software/overview">Software Developers</a></li>
                            </ul>
                        </div><a class="navbar__item navbar__link" href="/blog">Blog</a><a href="https://riscv.org/community/calendar/" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Events<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></div>
                        <div class="navbar-item search hide-for-print">
                          <div id="search-field" class="field">
                            <input id="search-input" type="text" placeholder="Search">
                          </div>
                        </div>
                    <div class="navbar__items navbar__items--right">


                      <div class="navbarSearchContainer_Bca1">

                      </div>
                    </div>
                </div>
                <div role="presentation" class="navbar-sidebar__backdrop"></div>
            </nav>
            <div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper__tJE"></div>
        

    </nav>
</header><div class="body">
<div class="nav-container" data-component="isa" data-version="">
  <aside class="nav">
    <div class="panels">
      <div class="nav-panel-menu is-active" data-panel="menu">
        <nav class="nav-menu">
<div class="context">
  <span class="title">ISA Specifications</span>
  <span class="version">default</span>
  <button class="browse-version" id="browse-version">
    <svg
      height="24px"
      id="Layer_1"
      style="enable-background:new 0 0 512 512;"
      version="1.1"
      viewBox="0 0 512 512"
      width="24px"
      xml:space="preserve"
    ><g><path
          d="M256,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S273.7,224,256,224L256,224z"
        ></path><path
          d="M128.4,224c-17.7,0-32,14.3-32,32s14.3,32,32,32c17.7,0,32-14.3,32-32S146,224,128.4,224L128.4,224z"
        ></path><path
          d="M384,224c-17.7,0-32,14.3-32,32s14.3,32,32,32s32-14.3,32-32S401.7,224,384,224L384,224z"
        ></path></g></svg>
  </button>
  </div><ul class="nav-list">
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Volume I: RISC-V Unprivileged ISA Specification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="colophon.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv32.html">RV32I Base Integer Instruction Set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv32e.html">RV32E and RV64E Base Integer Instruction Sets, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv64.html">RV64I Base Integer Instruction Set</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zifencei.html">"Zifencei" Extension for Instruction-Fetch Fence, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zicsr.html">"Zicsr", Extension for Control and Status Register (CSR) Instructions, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="counters.html">"Zicntr" and "Zihpm" Extensions for Counters, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zihintntl.html">"Zihintntl" Extension for Non-Temporal Locality Hints, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zihintpause.html">"Zihintpause" Extension for Pause Hint, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zimop.html">"Zimop" Extension for May-Be-Operations, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zicond.html">"Zicond" Extension for Integer Conditional Operations, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="m-st-ext.html">"M" Extension for Integer Multiplication and Division, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="a-st-ext.html">"A" Extension for Atomic Instructions, Version 2.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zawrs.html">"Zawrs" Extension for Wait-on-Reservation-Set instructions, Version 1.01</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zacas.html">"Zacas" Extension for Atomic Compare-and-Swap (CAS) Instructions, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zabha.html">"Zabha" Extension for Byte and Halfword Atomic Memory Operations, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rvwmo.html">RVWMO Memory Consistency Model, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="ztso-st-ext.html">"Ztso" Extension for Total Store Ordering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="cmo.html">"CMO" Extensions for Base Cache Management Operation ISA, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="f-st-ext.html">"F" Extension for Single-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="d-st-ext.html">"D" Extension for Double-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="q-st-ext.html">"Q" Extension for Quad-Precision Floating-Point, Version 2.2</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfh.html">"Zfh" and "Zfhmin" Extensions for Half-Precision Floating-Point, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="bfloat16.html">"BF16" Extensions for for BFloat16-precision Floating-Point, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfa.html">"Zfa" Extension for Additional Floating-Point Instructions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zfinx.html">"Zfinx", "Zdinx", "Zhinx", "Zhinxmin" Extensions for Floating-Point in Integer Registers, Version 1.0</a>
  </li>
  <li class="nav-item is-current-page" data-depth="1">
    <a class="nav-link"  href="c-st-ext.html">"C" Extension for Compressed Instructions, Version 2.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="zc.html">"Zc*" Extension for Code Size Reduction, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="b-st-ext.html">"B" Extension for Bit Manipulation, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="v-st-ext.html">"V" Standard Extension for Vector Operations, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="scalar-crypto.html">Cryptography Extensions: Scalar &amp; Entropy Source Instructions, Version 1.0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="vector-crypto.html">Cryptography Extensions: Vector Instructions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="unpriv-cfi.html">Control-flow Integrity (CFI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="rv-32-64g.html">RV32/64G Instruction Set Listings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="naming.html">ISA Extension Naming Conventions</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="mm-eplan.html">Appendix A: RVWMO Explanatory Material, Version 0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="mm-formal.html">Appendix B: Formal Memory Model Specifications, Version 0.1</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="vector-examples.html">Appendix C: Vector Assembly Code Examples</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="calling-convention.html">Appendix D: Calling Convention for Vector State (Not authoritative - Placeholder Only)</a>
  </li>
</ul>
  </li>
  <li class="nav-item" data-depth="0">
    <button class="nav-item-toggle"></button>
    <span class="nav-text">Volume II: RISC-V Privileged ISA Specification</span>
<ul class="nav-list">
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-index.html">Privileged Architecture</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-contributors.html">Contributors</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-preface.html">Preface</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-intro.html">Introduction</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-csrs.html">Control and Status Registers (CSRs)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/machine.html">Machine-Level ISA, Version 1.13</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smstateen.html">"Smstateen/Ssstateen" Extensions, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/indirect-csr.html">"Smcsrind/Sscsrind" Indirect CSR Access, version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="#smepmp.adoc">"Smepmp" Extension for PMP Enhancements, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smcntrpmf.html">"Smcntrpmf" Cycke and Instret Privilege Mode Filtering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/rnmi.html">"Smrnmi" Extension for Resumable Non-Maskable Interrupts, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smcdeleg.html">"Smcdeleg" Counter Delegation Extension, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smdbltrp.html">"Smdbltrp" Double Trap Extension, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/smctr.html">"Smctr" Control Transfer Records Extension, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/supervisor.html">Supervisor-Level ISA, Version 1.13</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/sstc.html">"Sstc" Extension for Supervisor-mode Timer Interrupts, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/sscofpmf.html">"Sscofpmf" Extension for Count Overflow and Mode-Based Filtering, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/hypervisor.html">"H" Extension for Hypervisor Support, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-cfi.html">Control-flow Integrity(CFI)</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/ssdbltrp.html">"Ssdbltrp" Double Trap Extension, Version 1.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/zpm.html">Pointer Masking Extensions, Version 1.0.0</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-insns.html">RISC-V Privileged Instruction Set Listings</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/priv-history.html">History</a>
  </li>
  <li class="nav-item" data-depth="1">
    <a class="nav-link"  href="../priv/bibliography.html">Bibliography</a>
  </li>
</ul>
  </li>
</ul>
          <div class="toggle-sm">
            <button id="nav-toggle-2" class="nav-toggle"></button>
          </div>
        </nav>
      </div>
      <div class="nav-collapse">
        <button id="nav-collapse-toggle"><span></span></button>        
      </div>
    </div>
    <div class="nav-resize"></div>
  </aside>
</div>
<script>
!function (sidebar) {
  if (sidebar) {
    document.body.classList.add('nav-sm')
  }
}(localStorage && localStorage.getItem('sidebar') === 'close')
</script><main class="article">
<div class="toolbar" role="navigation">
  <button id="nav-toggle-1" class="nav-toggle"></button>
</div>
  <div class="content">
<aside class="sidebar">
  <div class="content">
    <div
      class="toc"
      data-title=""
      data-levels="2"
    >
      <div class="toc-menu"></div>
    </div>
    <div class="sidebar-links">
    </div>
  </div>
</aside>
<article class="doc">
<div class="breadcrumbs-container">
  <nav class="breadcrumbs" aria-label="breadcrumbs">
    <ul>
      <li><a href="../index.html">ISA Specifications</a></li>
      <li>Volume I: RISC-V Unprivileged ISA Specification</li>
      <li><a href="c-st-ext.html">"C" Extension for Compressed Instructions, Version 2.0</a></li>
    </ul>
  </nav>
</div><div class="sect1">
<h2 id="compressed"><a class="anchor" href="#compressed"></a>"C" Extension for Compressed Instructions, Version 2.0</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This chapter describes the RISC-V standard compressed instruction-set
extension, named "C", which reduces static and dynamic code size by
adding short 16-bit instruction encodings for common operations. The C
extension can be added to any of the base ISAs (RV32I, RV32E, RV64I, RV64E), and
we use the generic term "RVC" to cover any of these. Typically,
50%-60% of the RISC-V instructions in a program can be replaced with RVC
instructions, resulting in a 25%-30% code-size reduction.</p>
</div>
<div class="sect2">
<h3 id="overview"><a class="anchor" href="#overview"></a>Overview</h3>
<div class="paragraph">
<p>RVC uses a simple compression scheme that offers shorter 16-bit versions
of common 32-bit RISC-V instructions when:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the immediate or address offset is small, or</p>
</li>
<li>
<p>one of the registers is the zero register (<code>x0</code>), the ABI link register
(<code>x1</code>), or the ABI stack pointer (<code>x2</code>), or</p>
</li>
<li>
<p>the destination register and the first source register are identical, or</p>
</li>
<li>
<p>the registers used are the 8 most popular ones.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The C extension is compatible with all other standard instruction
extensions. The C extension allows 16-bit instructions to be freely
intermixed with 32-bit instructions, with the latter now able to start
on any 16-bit boundary, i.e., IALIGN=16. With the addition of the C
extension, no instructions can raise instruction-address-misaligned
exceptions.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Removing the 32-bit alignment constraint on the original 32-bit
instructions allows significantly greater code density.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>The compressed instruction encodings are mostly common across RV32C and
RV64C, but as shown in <a href="#rvc-instr-table0">Instruction listing for RVC, Quadrant 0</a>, a few opcodes are used for
different purposes depending on base ISA. For example, the wider
address-space RV64C variant requires additional opcodes to
compress loads and stores of 64-bit integer values, while RV32C uses the
same opcodes to compress loads and stores of single-precision
floating-point values.
If the C extension is implemented, the
appropriate compressed floating-point load and store instructions must
be provided whenever the relevant standard floating-point extension (F
and/or D) is also implemented. In addition, RV32C includes a compressed
jump and link instruction to compress short-range subroutine calls,
where the same opcode is used to compress ADDIW for RV64C.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Double-precision loads and stores are a significant fraction of static
and dynamic instructions, hence the motivation to include them in the
RV32C and RV64C encoding.</p>
</div>
<div class="paragraph">
<p>Although single-precision loads and stores are not a significant source
of static or dynamic compression for benchmarks compiled for the
currently supported ABIs, for microcontrollers that only provide
hardware single-precision floating-point units and have an ABI that only
supports single-precision floating-point numbers, the single-precision
loads and stores will be used at least as frequently as double-precision
loads and stores in the measured benchmarks. Hence, the motivation to
provide compressed support for these in RV32C.</p>
</div>
<div class="paragraph">
<p>Short-range subroutine calls are more likely in small binaries for
microcontrollers, hence the motivation to include these in RV32C.</p>
</div>
<div class="paragraph">
<p>Although reusing opcodes for different purposes for different base ISAs
adds some complexity to documentation, the impact on implementation
complexity is small even for designs that support multiple base ISAs.
The compressed floating-point load and store variants use the same
instruction format with the same register specifiers as the wider
integer loads and stores.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RVC was designed under the constraint that each RVC instruction expands
into a single 32-bit instruction in either the base ISA (RV32I/E or RV64I/E)
or the F and D standard extensions where present. Adopting
this constraint has two main benefits:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Hardware designs can simply expand RVC instructions during decode,
simplifying verification and minimizing modifications to existing
microarchitectures.</p>
</li>
<li>
<p>Compilers can be unaware of the RVC extension and leave code compression
to the assembler and linker, although a compression-aware compiler will
generally be able to produce better results.</p>
</li>
</ul>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We felt the multiple complexity reductions of a simple one-one mapping
between C and base IFD instructions far outweighed the potential gains
of a slightly denser encoding that added additional instructions only
supported in the C extension, or that allowed encoding of multiple IFD
instructions in one C instruction.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>It is important to note that the C extension is not designed to be a
stand-alone ISA, and is meant to be used alongside a base ISA.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Variable-length instruction sets have long been used to improve code
density. For example, the IBM Stretch cite:[stretch], developed in the late 1950s, had
an ISA with 32-bit and 64-bit instructions, where some of the 32-bit
instructions were compressed versions of the full 64-bit instructions.
Stretch also employed the concept of limiting the set of registers that
were addressable in some of the shorter instruction formats, with short
branch instructions that could only refer to one of the index registers.
The later IBM 360 architecture cite:[ibm360] supported a simple variable-length
instruction encoding with 16-bit, 32-bit, or 48-bit instruction formats.</p>
</div>
<div class="paragraph">
<p>In 1963, CDC introduced the Cray-designed CDC 6600 cite:[cdc6600], a precursor to RISC
architectures, that introduced a register-rich load-store architecture
with instructions of two lengths, 15-bits and 30-bits. The later Cray-1
design used a very similar instruction format, with 16-bit and 32-bit
instruction lengths.</p>
</div>
<div class="paragraph">
<p>The initial RISC ISAs from the 1980s all picked performance over code
size, which was reasonable for a workstation environment, but not for
embedded systems. Hence, both ARM and MIPS subsequently made versions of
the ISAs that offered smaller code size by offering an alternative
16-bit wide instruction set instead of the standard 32-bit wide
instructions. The compressed RISC ISAs reduced code size relative to
their starting points by about 25-30%, yielding code that was
significantly smaller than 80x86. This result surprised some, as their
intuition was that the variable-length CISC ISA should be smaller than
RISC ISAs that offered only 16-bit and 32-bit formats.</p>
</div>
<div class="paragraph">
<p>Since the original RISC ISAs did not leave sufficient opcode space free
to include these unplanned compressed instructions, they were instead
developed as complete new ISAs. This meant compilers needed different
code generators for the separate compressed ISAs. The first compressed
RISC ISA extensions (e.g., ARM Thumb and MIPS16) used only a fixed
16-bit instruction size, which gave good reductions in static code size
but caused an increase in dynamic instruction count, which led to lower
performance compared to the original fixed-width 32-bit instruction
size. This led to the development of a second generation of compressed
RISC ISA designs with mixed 16-bit and 32-bit instruction lengths (e.g.,
ARM Thumb2, microMIPS, PowerPC VLE), so that performance was similar to
pure 32-bit instructions but with significant code size savings.
Unfortunately, these different generations of compressed ISAs are
incompatible with each other and with the original uncompressed ISA,
leading to significant complexity in documentation, implementations, and
software tools support.</p>
</div>
<div class="paragraph">
<p>Of the commonly used 64-bit ISAs, only PowerPC and microMIPS currently
supports a compressed instruction format. It is surprising that the most
popular 64-bit ISA for mobile platforms (ARM v8) does not include a
compressed instruction format given that static code size and dynamic
instruction fetch bandwidth are important metrics. Although static code
size is not a major concern in larger systems, instruction fetch
bandwidth can be a major bottleneck in servers running commercial
workloads, which often have a large instruction working set.</p>
</div>
<div class="paragraph">
<p>Benefiting from 25 years of hindsight, RISC-V was designed to support
compressed instructions from the outset, leaving enough opcode space for
RVC to be added as a simple extension on top of the base ISA (along with
many other extensions). The philosophy of RVC is to reduce code size for
embedded applications <em>and</em> to improve performance and energy-efficiency
for all applications due to fewer misses in the instruction cache.
Waterman shows that RVC fetches 25%-30% fewer instruction bits, which
reduces instruction cache misses by 20%-25%, or roughly the same
performance impact as doubling the instruction cache size. cite:[waterman-ms]</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="compressed-instruction-formats"><a class="anchor" href="#compressed-instruction-formats"></a>Compressed Instruction Formats</h3>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><a href="#rvc-form">Compressed 16-bit RVC instruction formats</a> shows the nine compressed instruction
formats. CR, CI, and CSS can use any of the 32 RVI registers, but CIW,
CL, CS, CA, and CB are limited to just 8 of them.
<a href="#registers">Registers specified by the three-bit <em>rs1</em>&#x2032;, <em>rs2</em>&#x2032;, and <em>rd</em>&#x2032; fields of the CIW, CL, CS, CA, and CB formats.</a> lists these popular registers, which
correspond to registers <code>x8</code> to <code>x15</code>. Note that there is a separate
version of load and store instructions that use the stack pointer as the
base address register, since saving to and restoring from the stack are
so prevalent, and that they use the CI and CSS formats to allow access
to all 32 data registers. CIW supplies an 8-bit immediate for the
ADDI4SPN instruction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The RISC-V ABI was changed to make the frequently used registers map to
registers 'x8-x15'. This simplifies the decompression decoder by
having a contiguous naturally aligned set of register numbers, and is
also compatible with the RV32E and RV64E base ISAs, which only have 16 integer
registers.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>Compressed register-based floating-point loads and stores also use the
CL and CS formats respectively, with the eight registers mapping to <code>f8</code> to <code>f15</code>.
</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>The standard RISC-V calling convention maps the most frequently used
floating-point registers to registers <code>f8</code> to <code>f15</code>, which allows the
same register decompression decoding as for integer register numbers.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>
The formats were designed to keep bits for the two register source
specifiers in the same place in all instructions, while the destination
register field can move. When the full 5-bit destination register
specifier is present, it is in the same place as in the 32-bit RISC-V
encoding. Where immediates are sign-extended, the sign extension is
always from bit 12. Immediate fields have been scrambled, as in the base
specification, to reduce the number of immediate multiplexers required.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The immediate fields are scrambled in the instruction formats instead of
in sequential order so that as many bits as possible are in the same
position in every instruction, thereby simplifying implementations.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>For many RVC instructions, zero-valued immediates are disallowed and
<code>x0</code> is not a valid 5-bit register specifier. These restrictions free up
encoding space for other instructions requiring fewer operand bits.</p>
</div>
<table id="rvc-form" class="tableblock frame-none grid-none stretch center">
<caption class="title">Table 1. Compressed 16-bit RVC instruction formats</caption>
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 66.6667%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none fit-content right">
<colgroup>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">Format</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Meaning</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CR</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Register</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CI</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Immediate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CSS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Stack-relative Store</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CIW</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Wide Immediate</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CL</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Load</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CS</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Store</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CA</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CB</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Branch/Arithmetic</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">CJ</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">Jump</p></td>
</tr>
</tbody>
</table></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all stretch left">
<colgroup>
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2857%;">
<col style="width: 14.2858%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">15 14 13</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">12</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">11 10</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">9 8 7</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">6 5</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">4 3 2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">1 0</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">funct4</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rd/rs1</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rs2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rd/rs1</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">rs2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="4"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">imm</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs2&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top" colspan="3"><p class="tableblock">funct6</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;/rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct2</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rs2&#x2032;</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">offset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">rd&#x2032;/rs1&#x2032;</p></td>
<td class="tableblock halign-center valign-top" colspan="2"><p class="tableblock">offset</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock">funct3</p></td>
<td class="tableblock halign-center valign-top" colspan="5"><p class="tableblock">jump target</p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock">op</p></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
<table id="registers" class="tableblock frame-none grid-none stretch center">
<caption class="title">Table 2. Registers specified by the three-bit <em>rs1</em>&#x2032;, <em>rs2</em>&#x2032;, and <em>rd</em>&#x2032; fields of the CIW, CL, CS, CA, and CB formats.</caption>
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-none grid-none fit-content">
<colgroup>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RVC Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Integer Register ABI Name</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floating-Point Register Number</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Floating-Point Register ABI Name</p></td>
</tr>
</tbody>
</table></div></td>
<td class="tableblock halign-left valign-top"><div class="content"><table class="tableblock frame-all grid-all fit-content">
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>000</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>001</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>010</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>011</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>100</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>101</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>110</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>111</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x8</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x9</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x10</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x11</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x12</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x13</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x14</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>x15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>s0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>s1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>a5</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f8</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f9</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f10</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f11</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f12</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f13</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f14</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>f15</code></p></td>
</tr>
<tr>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fs0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fs1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa0</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa1</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa2</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa3</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa4</code></p></td>
<td class="tableblock halign-center valign-top"><p class="tableblock"><code>fa5</code></p></td>
</tr>
</tbody>
</table></div></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="load-and-store-instructions"><a class="anchor" href="#load-and-store-instructions"></a>Load and Store Instructions</h3>
<div class="paragraph">
<p>To increase the reach of 16-bit instructions, data-transfer instructions
use zero-extended immediates that are scaled by the size of the data in
bytes: Ã—4 for words, Ã—8 for double
words, and Ã—16 for quad words.</p>
</div>
<div class="paragraph">
<p>RVC provides two variants of loads and stores. One uses the ABI stack
pointer, <code>x2</code>, as the base address and can target any data register. The
other can reference one of 8 base address registers and one of 8 data
registers.</p>
</div>
<div class="sect3">
<h4 id="stack-pointer-based-loads-and-stores"><a class="anchor" href="#stack-pointer-based-loads-and-stores"></a>Stack-Pointer-Based Loads and Stores</h4>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBxJKSIqAadSN1HXVn7ERsrQ7CCFO4EZm5uRAzYEaYApXnp6UVp5ZEm1gZ1ZhbmcUCFSCEjGss0IRqLNHV4NaGwxVFKWgeAbkiJbW45FHnAgOQOfjYcBrFcEPcXjREeNE0lmQ2ii3GcFvSSvOSS4yBFsFsMQaFu55PeHAAyIFAlgucFQhjuSGk3cDyIMNjdRSS8_PSMoGxDvOLWW0tAHBqlSU=" alt="svg">
</div>
</div>
<div id="c-sp-load-store" class="paragraph">
<p>These instructions use the CI format.</p>
</div>
<div class="paragraph">
<p>C.LWSP loads a 32-bit value from memory into register <em>rd</em>. It computes
an effective address by adding the <em>zero</em>-extended offset, scaled by 4,
to the stack pointer, <code>x2</code>. It expands to <code>lw rd, offset(x2)</code>. C.LWSP is
valid only when <em>rd</em>â‰ <code>x0</code>; the code points with <em>rd</em>=<code>x0</code> are reserved.</p>
</div>
<div class="paragraph">
<p>C.LDSP is an RV64C-only instruction that loads a 64-bit value
from memory into register <em>rd</em>. It computes its effective address by
adding the zero-extended offset, scaled by 8, to the stack pointer,
<code>x2</code>. It expands to <code>ld rd, offset(x2)</code>. C.LDSP is valid only when
<em>rd</em>â‰ <code>x0</code>; the code points with
<em>rd</em>=<code>x0</code> are reserved.</p>
</div>
<div class="paragraph">
<p>C.FLWSP is an RV32FC-only instruction that loads a single-precision
floating-point value from memory into floating-point register <em>rd</em>. It
computes its effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the stack pointer, <code>x2</code>. It expands to
<code>flw rd, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLDSP is an RV32DC/RV64DC-only instruction that loads a
double-precision floating-point value from memory into floating-point
register <em>rd</em>. It computes its effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>fld rd, offset(x2)</code>.</p>
</div>
<div class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kDEPgjAQhXd_xW1dGhNbqdoVw6xhcCAMSKhhAExbJ-C_e1VbAmqH9uXd3deX63V1k5CtAPprbY0ERqEtmkoC6e6EgjuFtRp7CCOUxL-vfKQTIgoIbdib4RERthtdovn_mbFEYNVNM2cJZHVKmcpmkWTDTorcIYLFh_3S2g6HpeUHv-ZmMXiIoR5taTkifAzuNrBOL-nJcVEdgzp7lUzl5FV38JxC2bWqxv1_ftmIcXwCyX9t5A==" alt="svg">
</div>
</div>
<div id="c-sp-load-store-css" class="paragraph">
<p>These instructions use the CSS format.</p>
</div>
<div class="paragraph">
<p>C.SWSP stores a 32-bit value in register <em>rs2</em> to memory. It computes an
effective address by adding the <em>zero</em>-extended offset, scaled by 4, to
the stack pointer, <code>x2</code>. It expands to <code>sw rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.SDSP is an RV64C-only instruction that stores a 64-bit value in
register <em>rs2</em> to memory. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>sd rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSWSP is an RV32FC-only instruction that stores a single-precision
floating-point value in floating-point register <em>rs2</em> to memory. It
computes an effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the stack pointer, <code>x2</code>. It expands to
<code>fsw rs2, offset(x2)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSDSP is an RV32DC/RV64DC-only instruction that stores a
double-precision floating-point value in floating-point register <em>rs2</em>
to memory. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the stack pointer, <code>x2</code>. It
expands to <code>fsd rs2, offset(x2)</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Register save/restore code at function entry/exit represents a
significant portion of static code size. The stack-pointer-based
compressed loads and stores in RVC are effective at reducing the
save/restore static code size by a factor of 2 while improving
performance by reducing dynamic instruction bandwidth.</p>
</div>
<div class="paragraph">
<p>A common mechanism used in other ISAs to further reduce save/restore
code size is load-multiple and store-multiple instructions. We
considered adopting these for RISC-V but noted the following drawbacks
to these instructions:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>These instructions complicate processor implementations.</p>
</li>
<li>
<p>For virtual memory systems, some data accesses could be resident in
physical memory and some could not, which requires a new restart
mechanism for partially executed instructions.</p>
</li>
<li>
<p>Unlike the rest of the RVC instructions, there is no IFD equivalent to
Load Multiple and Store Multiple.</p>
</li>
<li>
<p>Unlike the rest of the RVC instructions, the compiler would have to be aware
of these load-multiple and store-multiple instructions to both allocate
registers in the expected order and also to schedule the loads and
stores contiguously and in the proper order, to maximize the chances of them
being detected and replaced by an assembler or linker with the equivalent
load-multiple or store-multiple compressed instruction.</p>
</li>
<li>
<p>Simple microarchitectural implementations will constrain how other
instructions can be scheduled around the load and store multiple
instructions, leading to a potential performance loss.</p>
</li>
<li>
<p>The desire for sequential register allocation might conflict with the
featured registers selected for the CIW, CL, CS, CA, and CB formats.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Furthermore, much of the gains can be realized in software by replacing
prologue and epilogue code with subroutine calls to common prologue and
epilogue code, a technique described in Section 5.6 of cite:[waterman-phd].</p>
</div>
<div class="paragraph">
<p>While reasonable architects might come to different conclusions, we
decided to omit load and store multiple and instead use the
software-only approach of calling save/restore millicode routines to
attain the greatest code size reduction.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="register-based-loads-and-stores"><a class="anchor" href="#register-based-loads-and-stores"></a>Register-Based Loads and Stores</h4>
<div id="reg-based-ldnstr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbAdnqzgY4ydhaHYQZxnAzilJO7QSqgBtjDFKeklpcgqCxUSimIVyUmZsLcxLURflpacWpJdFGNWaxSFxzK3xcbIpxOb_YEOx-FOcnJRanEqRxGAjxAap5UHeYWhnH4uHWmNRYxBJQjsPStNK85BJjDHud9XzCobQLlA6E0G4wCTegDMjQWB2F5Py8tExgUoGabmhWWwsAcj2iYg==?id=reg-based-ldnstr" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
These instructions use the CL format.</p>
</div>
<div class="paragraph">
<p>C.LW loads a 32-bit value from memory into register
<code><em>rdâ€²</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 4, to the base address in register
<code><em>rs1â€²</em></code>. It expands to <code>lw rdâ€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.LD is an RV64C-only instruction that loads a 64-bit value from
memory into register <code><em>rdâ€²</em></code>. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 8, to the base
address in register <code><em>rs1â€²</em></code>. It expands to
<code>ld rdâ€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLW is an RV32FC-only instruction that loads a single-precision
floating-point value from memory into floating-point register
<code><em>rdâ€²</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 4, to the base address in register
<code><em>rs1â€²</em></code>. It expands to
<code>flw rdâ€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.FLD is an RV32DC/RV64DC-only instruction that loads a double-precision
floating-point value from memory into floating-point register
<code><em>rdâ€²</em></code>. It computes an effective address by adding the
<em>zero</em>-extended offset, scaled by 8, to the base address in register
<code><em>rs1â€²</em></code>. It expands to
<code>fld rdâ€², offset(rs1â€²)</code>.</p>
</div>
<div id="c-cs-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBxJKSIqAadSMgX93ZQF0HCxFbq4MwwxhuRlGx0amdYGNghhiDDCkuSgZqw06imIRwTWZuLsQ5KK7JT0srTi2JNqoxiwVqh_LMrXDzsKjE6XRDbE5PSixOBRqAm8JhHIb7jZHcb2pljOQqNF6NSY0FblkQD4eVaaV5ySUga1CsdNYLDgfFmV6wC4QKBFNuUFE3oDDIvFgdheT8vLRMYOqAGmxoVlsLAJbsn54=?id=c-cs-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CS format.</p>
</div>
<div class="paragraph">
<p>C.SW stores a 32-bit value in register <code><em>rs2â€²</em></code> to memory.
It computes an effective address by adding the <em>zero</em>-extended offset,
scaled by 4, to the base address in register <code><em>rs1â€²</em></code>. It
expands to <code>sw rs2â€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.SD is an RV64C-only instruction that stores a 64-bit value in
register <code><em>rs2â€²</em></code> to memory. It computes an effective
address by adding the <em>zero</em>-extended offset, scaled by 8, to the base
address in register <code><em>rs1â€²</em></code>. It expands to
<code>sd rs2â€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSW is an RV32FC-only instruction that stores a single-precision
floating-point value in floating-point register <code><em>rs2â€²</em></code> to
memory. It computes an effective address by adding the <em>zero</em>-extended
offset, scaled by 4, to the base address in register
<code><em>rs1â€²</em></code>. It expands to
<code>fsw rs2â€², offset(rs1â€²)</code>.</p>
</div>
<div class="paragraph">
<p>C.FSD is an RV32DC/RV64DC-only instruction that stores a
double-precision floating-point value in floating-point register
<code><em>rs2â€²</em></code> to memory. It computes an effective address by
adding the <em>zero</em>-extended offset, scaled by 8, to the base address in
register <code><em>rs1â€²</em></code>. It expands to
<code>fsd rs2â€², offset(rs1â€²)</code>.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="control-transfer-instructions"><a class="anchor" href="#control-transfer-instructions"></a>Control Transfer Instructions</h3>
<div class="paragraph">
<p>RVC provides unconditional jump instructions and conditional branch
instructions. As with base RVI instructions, the offsets of all RVC
control transfer instructions are in multiples of 2 bytes.</p>
</div>
<div id="c-cj-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBxJKSIqAadSN1HXVnQwgRW6uD0GNoCNeUmZsL1gXTYwhSn5-WVpxaEm1oWGNSY2llUWNoUGNWY15jbGVYYxpLUB7FKmO4TWmlecklxkDLYFYZg1ym5wUhHX3A-mJ1FJLz89IygX6EudWsthYA8P1F0A==?id=c-cj-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CJ format.</p>
</div>
<div class="paragraph">
<p>C.J performs an unconditional control transfer. The offset is
sign-extended and added to the <code>pc</code> to form the jump target address. C.J
can therefore target a &#177;2 KiB range. C.J expands to
<code>jal x0, offset</code>.</p>
</div>
<div class="paragraph">
<p>C.JAL is an RV32C-only instruction that performs the same operation as
C.J, but additionally writes the address of the instruction following
the jump (<code>pc+2</code>) to the link register, <code>x1</code>. C.JAL expands to
<code>jal x1, offset</code>.</p>
</div>
<div id="c-cr-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOwMJBRAZW6uD0GAK11BUDFIAAjBdpkBdBiBNBrj1GGLRU1yU_KhzAVgnjImi3wSuP600L7nEBGQETL8JyKV6XkFgt-p5OfoEgfXG6igk5-elZQJ9CzXE0Ky2FgDFjkcZ?id=c-cr-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CR format.</p>
</div>
<div class="paragraph">
<p>C.JR (jump register) performs an unconditional control transfer to the
address in register <em>rs1</em>. C.JR expands to <code>jalr x0, 0(rs1)</code>. C.JR is
valid only when <em>rs1</em>â‰ <code>x0</code>; the code
point with <em>rs1</em>=<code>x0</code> is reserved.</p>
</div>
<div class="paragraph">
<p>C.JALR (jump and link register) performs the same operation as C.JR, but
additionally writes the address of the instruction following the jump
(<code>pc</code>+2) to the link register, <code>x1</code>. C.JALR expands to
<code>jalr x1, 0(rs1)</code>. C.JALR is valid only when
<em>rs1</em>â‰ <code>x0</code>; the code point with
<em>rs1</em>=<code>x0</code> corresponds to the C.EBREAK
instruction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Strictly speaking, C.JALR does not expand exactly to a base RVI
instruction as the value added to the PC to form the link address is 2
rather than 4 as in the base ISA, but supporting both offsets of 2 and 4
bytes is only a very minor change to the base microarchitecture.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-cb-format-ls" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOxsCBUBkbK0OQoMpXENmbi6SDlOgjvy0tOLUkmhzK7MaIyvDGtNYkAGYgijmGcPNKyo2fNSwCagFBGDGGgONLS5KBhkEonBohTgFTRvUYosaEytjZJdABWJ1sJuVVpqXXGKMaZyznpNrYBQ4SPSc_FyjIAbE6igk5-elZQJDFWqSoVltLQDXAWZJ?id=c-cb-format-ls" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CB format.</p>
</div>
<div class="paragraph">
<p>C.BEQZ performs conditional control transfers. The offset is
sign-extended and added to the <code>pc</code> to form the branch target address.
It can therefore target a &#177;256 B range. C.BEQZ takes the
branch if the value in register <em>rs1â€²</em> is zero. It
expands to <code>beq rs1â€², x0, offset</code>.</p>
</div>
<div class="paragraph">
<p>C.BNEZ is defined analogously, but it takes the branch if
<em>rs1â€²</em> contains a nonzero value. It expands to
<code>bne rs1â€², x0, offset</code>.</p>
</div>
</div>
<div class="sect2">
<h3 id="integer-computational-instructions"><a class="anchor" href="#integer-computational-instructions"></a>Integer Computational Instructions</h3>
<div class="paragraph">
<p>RVC provides several instructions for integer arithmetic and constant
generation.</p>
</div>
<div class="sect3">
<h4 id="integer-constant-generation-instructions"><a class="anchor" href="#integer-constant-generation-instructions"></a>Integer Constant-Generation Instructions</h4>
<div class="paragraph">
<p>The two constant-generation instructions both use the CI instruction
format and can target any integer register.</p>
</div>
<div id="c-integer-const-gen" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kD0LgzAQhvf-iuuUJYiJ1ULAqZPg2kkyWD-Kg7FoulTy33vRRptCMxzcXd6Hh5vH5i6gOADMt05PAjgFVfaNADI8CIVS6xH3hBNKLgwHtkpD90C8Bbq-L04ilPgLn0vGmNw3RL1swxLBuPwHGusV4THqZtJwTCG0Eq6ZQwrc-BzmCcU_Ouyjs8ydzRlV6Dcj2hjtU1U68hmRPUaQZ8s5gvyarWlJoRpU2-FBnUpizBvPNWDr?id=c-integer-const-gen" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.LI loads the sign-extended 6-bit immediate, <em>imm</em>, into register <em>rd</em>.
C.LI expands into <code>addi rd, x0, imm</code>.
The C.LI code points with <em>rd</em>=<code>x0</code> are HINTs.</p>
</div>
<div class="paragraph">
<p>C.LUI loads the non-zero 6-bit immediate field into bits 17â€“12 of the
destination register, clears the bottom 12 bits, and sign-extends bit 17
into all higher bits of the destination. C.LUI expands into
<code>lui rd, imm</code>. C.LUI is valid only when
<em>rd</em>â‰ <code>x2</code>,
and when the immediate is not equal to zero. The code points with
<em>imm</em>=0 are reserved.
The code points with <em>rd</em>=<code>x2</code> and <em>imm</em>â‰ 0 correspond to the
C.ADDI16SP instruction.
The code points with <em>rd</em>=<code>x0</code> and <em>imm</em>â‰ 0 are HINTs.</p>
</div>
</div>
<div class="sect3">
<h4 id="integer-register-immediate-operations"><a class="anchor" href="#integer-register-immediate-operations"></a>Integer Register-Immediate Operations</h4>
<div class="paragraph">
<p>These integer register-immediate operations are encoded in the CI format
and perform operations on an integer register and a 6-bit immediate.</p>
</div>
<div id="c-integer-register-immediate" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNp1kb0OgjAURnef4jp1aZSCRW3iYGRxM3FwIB1QwDBQTKmLwLtL-SnUxA7NbW-_k5PbSiZPBuECoLpnqmTgYhBRnjBAxQthGFaklGyfIRdhdCLt_bTzBk9patJZnocbxjViDNM2LD59w9EdNK-HTu3XO7atKf8HlvFalqRXm5PjpFSwPICjYdbBtVHEcqTcRhEjSY0inQnuf8Q8Q0vf4qE8m-bpea2OQXDuptVVt6kk_vXS4TiGRyHSrP2L0dJvmi_Y4HAl?id=c-integer-register-immediate" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.ADDI adds the non-zero sign-extended 6-bit immediate to the value in
register <em>rd</em> then writes the result to <em>rd</em>. C.ADDI expands into
<code>addi rd, rd, imm</code>.
The code points with <em>rd</em>â‰ 0 and <em>imm</em>=0 are HINTs.
The code points with <em>rd</em>=<code>x0</code> encode the C.NOP instruction, of
which the code points with <em>imm</em>â‰ 0 are HINTs.</p>
</div>
<div class="paragraph">
<p>C.ADDIW is an RV64C-only instruction that performs the same
computation but produces a 32-bit result, then sign-extends result to 64
bits. C.ADDIW expands into <code>addiw rd, rd, imm</code>. The immediate can be
zero for C.ADDIW, where this corresponds to <code>sext.w rd</code>. C.ADDIW is
valid only when <em>rd</em>â‰ <code>x0</code>; the code points with
<em>rd</em>=<code>x0</code> are reserved.</p>
</div>
<div class="paragraph">
<p>C.ADDI16SP (add immediate to stack pointer)
shares the opcode with C.LUI, but has a destination field of
<code>x2</code>. C.ADDI16SP adds the non-zero sign-extended 6-bit immediate to the
value in the stack pointer (<code>sp=x2</code>), where the immediate is scaled to
represent multiples of 16 in the range [-512, 496]. C.ADDI16SP is used to
adjust the stack pointer in procedure prologues and epilogues. It
expands into <code>addi x2, x2, nzimm[9:4]</code>. C.ADDI16SP is valid only when
<em>nzimm</em>â‰ 0; the code point with <em>nzimm</em>=0 is reserved.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>In the standard RISC-V calling convention, the stack pointer <code>sp</code> is
always 16-byte aligned.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-ciw" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOxuox-rU6iDUGsPVFqU8atgEVA4CMC3GQC0pqcUlaJos4Joyc3MhWmA6LIA68qpKgeLRplYmNZZWZjVGNcax6rHYLU0rzUsuMUY1AmSps56ji4unSXCAH1hnrI5Ccn5eWibQn1AjDM1qawG_eEd5?id=c-ciw" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
C.ADDI4SPN (add immediate to stack pointer, non-destructive)
is a CIW-format instruction that adds a <em>zero</em>-extended
non-zero immediate, scaled by 4, to the stack pointer, <code>x2</code>, and writes
the result to <code>rdâ€²</code>. This instruction is used to generate
pointers to stack-allocated variables, and expands to
<code>addi rdâ€², x2, nzuimm[9:2]</code>. C.ADDI4SPN is valid only when
<em>nzuimm</em>â‰ 0; the code points with <em>nzuimm</em>=0 are
reserved.</p>
</div>
<div id="c-ci" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbAdnqzkbqsbU6CLWmcLXFGYm5JdEmVgaxQHVAANNmCtKGJIlDe1GKflGxIUQrqt6U1OISBUVbBQNUrYZoNpui2WuIsNcUzVZjuNa00rzkEmNUjcZgf-oF-_h4grXF1gIAzdVQIg==?id=c-ci" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.SLLI is a CI-format instruction that performs a logical left shift of
the value in register <em>rd</em> then writes the result to <em>rd</em>. The shift
amount is encoded in the <em>shamt</em> field.
C.SLLI expands into <code>slli rd, rd, shamt[5:0]</code>.</p>
</div>
<div class="paragraph">
<p>The C.SLLI code points with <em>shamt</em>=0 or with <em>rd</em>=<code>x0</code> are HINTs.</p>
</div>
<div class="paragraph">
<p>For RV32C, <em>shamt[5]</em> must be zero; the code points with <em>shamt[5]</em>=1
are designated for custom extensions.</p>
</div>
<div id="c-srli-srai" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOxsCBUBkrE6tDkKHKVxHcUZibkm0iZVBLFAhEMA0mwI1o8gh81ANM4YbVpTyqGGTflGxIZCCGAc3zxhoXkpqcQnIJDCNagbCC2mlecklRqiOAftELzjIxxPsGyDL0RPNAEM0H5mi-ccQ7h9TJN-Y4vYL2B3GqIYY43RHbC0Add1yEw==?id=c-srli-srai" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.SRLI is a CB-format instruction that performs a logical right shift of
the value in register <em>rdâ€²</em> then writes the result to
<em>rdâ€²</em>. The shift amount is encoded in the <em>shamt</em> field.
C.SRLI expands into <code>srli rdâ€², rdâ€², shamt</code>.</p>
</div>
<div class="paragraph">
<p>The C.SRLI code points with <em>shamt</em>=0 are HINTs.</p>
</div>
<div class="paragraph">
<p>For RV32C, <em>shamt[5]</em> must be zero; the code points with <em>shamt[5]</em>=1
are designated for custom extensions.</p>
</div>
<div class="paragraph">
<p>C.SRAI is defined analogously to C.SRLI, but instead performs an
arithmetic right shift. C.SRAI expands to
<code>srai rdâ€², rdâ€², shamt</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>Left shifts are usually more frequent than right shifts, as left shifts
are frequently used to scale address values. Right shifts have therefore
been granted less encoding space and are placed in an encoding quadrant
where all other immediates are sign-extended.</p>
</div>
</td>
</tr>
</table>
</div>
<div id="c-andi" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCCxJKSIqASdSN1HXVnQ_VYnVodhHJTuPLM3NxoEyuDWFRNpkBNcJlYZJ3GcJ1FKY8aNukXFRsCKVTdxkDdKanFJWiWItyYVpqXXGIE0YTqUD1HPxdPNH2GKI41RXOqIdSpQHFUbcao1gEdheJAZKtiawHUi17G?id=c-andi" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>C.ANDI is a CB-format instruction that computes the bitwise AND of the
value in register <em>rdâ€²</em> and the sign-extended 6-bit
immediate, then writes the result to <em>rdâ€²</em>. C.ANDI
expands to <code>andi rdâ€², rdâ€², imm</code>.</p>
</div>
</div>
<div class="sect3">
<h4 id="integer-register-register-operations"><a class="anchor" href="#integer-register-register-operations"></a>Integer Register-Register Operations</h4>
<div id="c-cr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBxJKSIqAadSMgX90ZRsbq1OogtJnCtRUVG0H0wbSZgjQUFyU_6lxggMzEaUCKflGxIVAligEpqcUlMBPgbFQjTOBGpJXmJZeYIBlhAna0nm8YhHZ0cYHojdVRSM7PS8sEhgHUEEOz2loArh5QKw==?id=c-cr" alt="svg">
</div>
</div>
<div class="paragraph">
<p>
These instructions use the CR format.</p>
</div>
<div class="paragraph">
<p>C.MV copies the value in register <em>rs2</em> into register <em>rd</em>. C.MV expands
into <code>add rd, x0, rs2</code>. C.MV is valid only when
<em>rs2</em>â‰ <code>x0</code>; the code points with <em>rs2</em>=<code>x0</code> correspond to the C.JR instruction. The code points with <em>rs2</em>â‰ <code>x0</code> and <em>rd</em>=<code>x0</code> are HINTs.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p><em>C.MV expands to a different instruction than the canonical MV
pseudoinstruction, which instead uses ADDI. Implementations that handle
MV specially, e.g. using register-renaming hardware, may find it more
convenient to expand C.MV to MV instead of ADD, at slight additional
hardware cost.</em></p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>C.ADD adds the values in registers <em>rd</em> and <em>rs2</em> and writes the result
to register <em>rd</em>. C.ADD expands into <code>add rd, rd, rs2</code>. C.ADD is only
valid when <em>rs2</em>â‰ <code>x0</code>; the code points with <em>rs2</em>=<code>x0</code> correspond to the C.JALR
and C.EBREAK instructions. The code points with <em>rs2</em>â‰ <code>x0</code> and <em>rd</em>=<code>x0</code> are HINTs.</p>
</div>
<div id="c-ca" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUQCBxJKSIqAadSMgX93ZkAAZq1OrgzDOGG5cUbHRo4ZNECNhJhqD9BQXJRNDoZqLcGZaaV5yCchpqM7Uc_RzgTD8gyB0BIwRHOoEVeLiEg4XCsft8hSgw_WLig0h7kdxfEpqcQnRNKoFZqheMEMy2owiL8TWAgDcEXyi?id=c-ca" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>These instructions use the CA format.</p>
</div>
<div class="paragraph">
<p><code>C.AND</code> computes the bitwise <code>AND</code> of the values in registers
<em>rdâ€²</em> and <em>rs2â€²</em>, then writes the result
to register <em>rdâ€²</em>. <code>C.AND</code> expands into
<code>and rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="paragraph">
<p><code>C.OR</code> computes the bitwise <code>OR</code> of the values in registers
<em>rdâ€²</em> and <em>rs2â€²</em>, then writes the result
to register <em>rdâ€²</em>. <code>C.OR</code> expands into
<code>or rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="paragraph">
<p><code>C.XOR</code> computes the bitwise <code>XOR</code> of the values in registers
<em>rdâ€²</em> and <em>rs2â€²</em>, then writes the result
to register <em>rdâ€²</em>. <code>C.XOR</code> expands into
<code>xor rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="paragraph">
<p><code>C.SUB</code> subtracts the value in register <em>rs2â€²</em> from the
value in register <em>rdâ€²</em>, then writes the result to
register <em>rdâ€²</em>. <code>C.SUB</code> expands into
<code>sub rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="paragraph">
<p><code>C.ADDW</code> is an RV64C-only instruction that adds the values in
registers <em>rdâ€²</em> and <em>rs2â€²</em>, then
sign-extends the lower 32 bits of the sum before writing the result to
register <em>rdâ€²</em>. <code>C.ADDW</code> expands into
<code>addw rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="paragraph">
<p><code>C.SUBW</code> is an RV64C-only instruction that subtracts the value in
register <em>rs2â€²</em> from the value in register
<em>rdâ€²</em>, then sign-extends the lower 32 bits of the
difference before writing the result to register <em>rdâ€²</em>.
<code>C.SUBW</code> expands into <code>subw rdâ€², rdâ€², rs2â€²</code>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This group of six instructions do not provide large savings
individually, but do not occupy much encoding space and are
straightforward to implement, and as a group provide a worthwhile
improvement in static and dynamic compression.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="defined-illegal-instruction"><a class="anchor" href="#defined-illegal-instruction"></a>Defined Illegal Instruction</h4>
<div id="c-def-illegal-inst" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlA3UNdRSCwpKQJKqxup6wD5sTq1OgiVplhVmlKk0hCrSkMsKo2xqjRGqIzVUUjOz0vLBHoPZrhZbS0ABoVARg==?id=c-def-illegal-inst" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>A 16-bit instruction with all bits zero is permanently reserved as an
illegal instruction.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>We reserve all-zero instructions to be illegal instructions to help trap
attempts to execute zero-ed or non-existent portions of the memory
space. The all-zero value should not be redefined in any non-standard
extension. Similarly, we reserve instructions with all bits set to 1
(corresponding to very long instructions in the RISC-V variable-length
encoding scheme) as illegal to capture another common value seen in
non-existent memory regions.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect3">
<h4 id="nop-instruction"><a class="anchor" href="#nop-instruction"></a>NOP Instruction</h4>
<div id="c-nop-instr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOxuqx-rU6iDUmsLVZubmRptYGcQi6TAF6jDAqaEoRb-o2JCAckMU802RTTfEotwYrjytNC-5xBhJuTHI-Xp-_gEQLbG1AGi5RFc=?id=c-nop-instr" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p><code>C.NOP</code> is a CI-format instruction that does not change any user-visible
state, except for advancing the <code>pc</code> and incrementing any applicable
performance counters. <code>C.NOP</code> expands to <code>nop</code>. The <code>C.NOP</code> code points
with <em>imm</em>â‰ 0 encode HINTs.</p>
</div>
</div>
<div class="sect3">
<h4 id="breakpoint-instruction"><a class="anchor" href="#breakpoint-instruction"></a>Breakpoint Instruction</h4>
<div id="c-breakpoint-instr" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/wavedrom/svg/eNqrLkpNt1KI5lJQqE7KLCm2UjDSUchLzE21UlDPL1DXUUgsKSkCyqsbqeuoOxupx-rU6iDUGhrAFRsgqTUEcoACqGpN4ErTSvOSS0yQ1JuAzNZzdQpydfSG6IrVUUjOz0vLBDoNZpVZbS0A-aYv3w==?id=c-breakpoint-instr" alt="svg">
</div>
</div>
<div class="paragraph">
<p></p>
</div>
<div class="paragraph">
<p>Debuggers can use the <code>C.EBREAK</code> instruction, which expands to <code>ebreak</code>,
to cause control to be transferred back to the debugging environment.
<code>C.EBREAK</code> shares the opcode with the <code>C.ADD</code> instruction, but with <em>rd</em> and
<em>rs2</em> both zero, thus can also use the <code>CR</code> format.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="usage-of-c-instructions-in-lrsc-sequences"><a class="anchor" href="#usage-of-c-instructions-in-lrsc-sequences"></a>Usage of C Instructions in LR/SC Sequences</h3>
<div class="paragraph">
<p>On implementations that support the C extension, compressed forms of the
I instructions permitted inside constrained LR/SC sequences, as
described in <a href="#sec:lrscseq">[sec:lrscseq]</a>, are also permitted
inside constrained LR/SC sequences.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The implication is that any implementation that claims to support both
the A and C extensions must ensure that LR/SC sequences containing valid
C instructions will eventually complete.</p>
</div>
</td>
</tr>
</table>
</div>
</div>
<div class="sect2">
<h3 id="rvc-hints"><a class="anchor" href="#rvc-hints"></a>HINT Instructions</h3>
<div class="paragraph">
<p>A portion of the RVC encoding space is reserved for microarchitectural
HINTs. Like the HINTs in the RV32I base ISA (see
<a href="#rv32i-hints">[rv32i-hints]</a>), these instructions do not
modify any architectural state, except for advancing the <code>pc</code> and any
applicable performance counters. HINTs are executed as no-ops on
implementations that ignore them.</p>
</div>
<div class="paragraph">
<p>RVC HINTs are encoded as computational instructions that do not modify
the architectural state, either because <em>rd</em>=<code>x0</code> (e.g.
<code>C.ADD <em>x0</em>, <em>t0</em></code>), or because <em>rd</em> is overwritten with a copy of itself
(e.g. <code>C.ADDI <em>t0</em>, 0</code>).</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>This HINT encoding has been chosen so that simple implementations can
ignore HINTs altogether, and instead execute a HINT as a regular
computational instruction that happens not to mutate the architectural
state.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p>RVC HINTs do not necessarily expand to their RVI HINT counterparts. For
example, <code>C.ADD</code> <em>x0</em>, <em>a0</em> might not encode the same HINT as
<code>ADD</code> <em>x0</em>, <em>x0</em>, <em>a0</em>.</p>
</div>
<div class="admonitionblock note">
<table>
<tr>
<td class="icon">
<i class="fa icon-note" title="Note"></i>
</td>
<td class="content">
<div class="paragraph">
<p>The primary reason to not require an RVC HINT to expand to an RVI HINT
is that HINTs are unlikely to be compressible in the same manner as the
underlying computational instruction. Also, decoupling the RVC and RVI
HINT mappings allows the scarce RVC HINT space to be allocated to the
most popular HINTs, and in particular, to HINTs that are amenable to
macro-op fusion.</p>
</div>
</td>
</tr>
</table>
</div>
<div class="paragraph">
<p><a href="#rvc-t-hints">RVC HINT instructions.</a> lists all RVC HINT code points. For RV32C, 78%
of the HINT space is reserved for standard HINTs. The remainder of the HINT space is designated for custom HINTs;
no standard HINTs will ever be defined in this subspace.</p>
</div>
<table id="rvc-t-hints" class="tableblock frame-all grid-all stretch">
<caption class="title">Table 3. RVC HINT instructions.</caption>
<colgroup>
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
<col style="width: 25%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Instruction</th>
<th class="tableblock halign-left valign-top">Constraints</th>
<th class="tableblock halign-right valign-top">Code Points</th>
<th class="tableblock halign-left valign-top">Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.NOP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>imm</em>â‰ 0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">63</p></td>
<td class="tableblock halign-left valign-middle" rowspan="6"><p class="tableblock"><em>Designated for future standard use</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADDI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>â‰ <code>x0</code>, <em>imm</em>=0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.LI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">64</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.LUI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>imm</em>â‰ 0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">63</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.MV</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em>â‰ <code>x0</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">31</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em>â‰ <code>x0</code>, <em>rs2</em>â‰ <code>x2-x5</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">27</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.ADD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code>, <em>rs2</em>=<code>x2-x5</code></p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">4</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">(rs2=x2) C.NTL.P1 (rs2=x3) C.NTL.PALL (rs2=x4) C.NTL.S1 (rs2=x5) C.NTL.ALL</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SLLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>rd</em>=<code>x0</code> or <em>imm</em>=0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">63 (RV32), 95 (RV64)</p></td>
<td class="tableblock halign-left valign-middle" rowspan="3"><p class="tableblock"><em>Designated for custom use</em></p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SRLI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>imm</em>=0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">C.SRAI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock"><em>imm</em>=0</p></td>
<td class="tableblock halign-right valign-top"><p class="tableblock">8</p></td>
</tr>
</tbody>
</table>
</div>
<div class="sect2">
<h3 id="rvc-instruction-set-listings"><a class="anchor" href="#rvc-instruction-set-listings"></a>RVC Instruction Set Listings</h3>
<div class="paragraph">
<p><a href="#rvcopcodemap">RVC opcode map instructions.</a> shows a map of the major
opcodes for RVC. Each row of the table corresponds to one quadrant of
the encoding space. The last quadrant, which has the two
least-significant bits set, corresponds to instructions wider than 16
bits, including those in the base ISAs. Several instructions are only
valid for certain operands; when invalid, they are marked either <em>RES</em>
to indicate that the opcode is reserved for future standard extensions;
<em>Custom</em> to indicate that the opcode is designated for custom
extensions; or <em>HINT</em> to indicate that the opcode is reserved for
microarchitectural hints (see <a href="#rvc-hints">HINT Instructions</a>).</p>
</div>
<div style="page-break-after: always;"></div>
<table id="rvcopcodemap" class="tableblock frame-all grid-all fit-content center">
<caption class="title">Table 4. RVC opcode map instructions.</caption>
<colgroup>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
<col>
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-right valign-top" colspan="2"><p class="tableblock">inst[15:13]<br>
inst[1:0]</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>000</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>001</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>010</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>011</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>100</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>101</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>110</strong></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><strong>111</strong></p></td>
<td class="tableblock halign-left valign-top"></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">00</p></td>
<td class="tableblock halign-left valign-middle"><p class="tableblock">ADDI4SPN</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLD<br>
FLD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLW<br>
LD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock"><em>Reserved</em></p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSD<br>
FSD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSW<br>
SD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">01</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">ADDI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">JAL<br>
ADDIW</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LUI/ADDI16SP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">MISC-ALU</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">J</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">BEQZ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">BNEZ</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">10</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SLLI</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLDSP<br>
FLDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">LWSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FLWSP<br>
LDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">J[AL]R/MV/ADD</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSDSP<br>
FSDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">SWSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">FSWSP<br>
SDSP</p></td>
<td class="tableblock halign-center valign-middle"><p class="tableblock">RV32<br>
RV64</p></td>
</tr>
<tr>
<td class="tableblock halign-right valign-middle" colspan="2"><p class="tableblock">11</p></td>
<td class="tableblock halign-center valign-top" colspan="9"><p class="tableblock">&gt;16b</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p><a href="#rvc-instr-table0">Instruction listing for RVC, Quadrant 0</a>, <a href="#rvc-instr-table1">Instruction listing for RVC, Quadrant 1</a>, and <a href="#rvc-instr-table2">Instruction listing for RVC, Quadrant 2</a> list the RVC instructions.</p>
</div>
<div id="rvc-instr-table0" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrdld2K2kAUx-_7FIe5UtopTqJxN9CLUissbEvZQPdCvBiTUYdOEpkZ96OrsM_UR-qT9Iw1sYYNbY0ti-BBOB__OfMbz7GViCm3VhsIF4rLDEbb74dwmmeWTnkq1T2QDy-BLWDIlZrw-AtZj9svWlgKOr-lcyFncwt-D_acPBGaTjPIpNr6lZhamnI9Q_1OketqC2e38E7yO2HoAgVQCzzfuTW_pXGulmm2FTfYpOIToQy0tLhBh4ARIfDEp4PG0Dw0H62L1kML0PpoZ2jnLmeT6DKZS2Uul7lk1iPj9rpoA9tDzQ4mP4RmwTPwIcTzrYy5olzJWQYklUmiBKnUlBVndQG_ekoZ8fYiLSvuLJALpcSMK5CZsXoZW5lnpHg8Y--VACItthRjJ4VQH0JXTHkWz3MNxFiuLYFwkuufWNd4Uu1V9_tbyjQd9cLu6jwMVt7KH9fccNuuTr4_fiN__is7kMq7128Hg4tu9OkjXivldo4nmuUESOvqffQKXNNvOm0yboKE_QbJLygqCdqwDYUno9sbbET6YTDevab8KoAFu2f0KqpJvWg9MEQ1vByQwzmwzr_n4K3-B4fL6yYY2ElgKOdn6GhURuez7zWbGXYaM1NCcoNTZRR0GzFi9auWUlqGGPu7Xq-EEfpGJASO_ufAnt8mNN6hqzBqsArZ81uFB4OIrptwYKfBYbcMo-MvQ8ZOZGxKStFRtuEPpnr1bQ==?id=rvc-instr-table0" alt="Instruction listing for RVC, Quadrant 0">
</div>
<div class="title">Figure 1. Instruction listing for RVC, Quadrant 0</div>
</div>
<div id="rvc-instr-table1" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrVWM1u00AQvvcpVj4logaP8--qh4QWUVRSSCggohw28aaxcOxo7TSt6khceQuegRN9hYqn6JMwm5j8NFqX1HGLJY8s7czs7vfNz66dMVmP-j73iDG0qeWQVvi-Mnqu46tjZp31faJ0XNtUyGysRweWfUmUt88IDMkratsd2v2qTNrZnQxOR7g7Vvszv4JGVgapybjac4hj2eG4zXq-OqD8DNfU_toK37uDHfeCeeoQ_XEqApXFsDq2TL9PSlNLTsdq17VHAydczkMoNu0w2yMZzs5xgJGWopDw0VAARUfJoeRRCihFlBJKGaUibKaGwhKEKQhbEMZQUNrZSXYnXBv3g5NqaH1leEPqkNwku6yyBoNWoT3Xwqp24VZYd8sbWlum12Cu0Vc0GZ9dYPxePq-fvMMADigy1TK8UYcomddH9Q-7BKe-_f5DyyKM-Z6JIdxU6nT7LieK51Puo3fH5TNGJxsDzi4QL2u5By-4KdZPDnn14OBICn0_LnCIAg4Q5IOKUQ5AC4pBKcgZECxHHzbF8qZ6fBdK42NOTxKDPFsfK3if1iEX83ukcdjcJdyMG0F4YK1y8_ev_QSRH0uSdguII-NdkSLWI8FigpeN0nJ6PyjYUGyuNapppLdQrFLg4Q6mJVuaApidftODRVSpNAcw-6-0XQQUxQ0UDdDjpMLpkZySPbKlvABpEw83MloUxL_RszShvtY6bq6xedxcy1JxFL-Cmg1ZDY3iJ1MCbMETs1V9Crbu6bIQI4UezIloRXVxaUgAriZFGiP8UYWm3377KfWLYKB5WksRAbB9Aj6fNNJDACSQAanCn0ACYA9IhABIRQtYHAynNdkNHD89xDU8qaMBUtEqlq-v6SFKVdXNe0mE0330NJjH-Dkz5_chz7-0GR7SPrWtrjJJAy-QMl4e5d-E-CsRo01Gf36Xg7yRa8sssNgjClb4l4xioK8C2-ASWDt8_yUONPiPodUPN4P2BySg3oY=?id=rvc-instr-table1" alt="Instruction listing for RVC, Quadrant 1">
</div>
<div class="title">Figure 2. Instruction listing for RVC, Quadrant 1</div>
</div>
<div id="rvc-instr-table2" class="imageblock kroki">
<div class="content">
<img src="https://kroki.io/bytefield/svg/eNrNVttum0AQfc9XjPYJ1NKw2OCUKg9ubatpSVSZKnmw_LAYHKNysXZxnCbxB_Qv8m39kg4JlPqCU9vYrcQIaXZmmHP2MLuS6w1ZknAB5jhgfgS97H1vDuMoUYYs9IPvQM5fAR1DhwWBwwbfyKwvH0mYCjyeKiPPvx4loKsw52Sux5VhBJEfZP7AGyZKyPg11lfz2DQ3d9ZzrxPfekIZYwGsBZpWuJWp7yYjaDxFcjZVBnEwCaPsewL7DpjjBQIk7t2gw4MeIbD4qGgUTUOrodXRdDQDrYF2gvY2jXkKTCNpGkrTWJoGU5305Zl8lDWBjWFRFaPvTTFmEdRm8h9LUuLdJkCiu4kfhj29T3J6hX_nATVmcp5H5_IIF_SYuz9_PBaV9fmIrGbdVPtlIbRI1la19eGNbVlnBMyQIbM9U0wcINLHs4uvr4G7pyrEHPAbp6qMmPNKBphptsKiwQjXiUgYT7CGE_PnfZgtsUPXs7MxN24Z4IyR2sOJaWzOCvLRsVr2F7I9VKpWDXWdBDK42kNjG7i_RWBdpZjnRdBt288a2G3r6aG3flcuOivJuKxp_xsPf6GLLX-DQhetVVQY9XdQjTpo6dgkxcLyXFyHXN0e7afu6n9A0H8Bc-3-cqGtW34Z6_ll-dDfF1ZahrXCzURo7ffddvMzOSiCykWZyrFpdQ-O4njPumu2WnsTXtmEzWbr4jQ0lqBtdV-wd7ov0NL7Qt71wnlWTdf21W5N04M3XZzP9j7O55chVa-e4g5ecsxuiugXk7w_Iw==?id=rvc-instr-table2" alt="Instruction listing for RVC, Quadrant 2">
</div>
<div class="title">Figure 3. Instruction listing for RVC, Quadrant 2</div>
</div>
</div>
</div>
</div>
<nav class="pagination">
  <span class="prev"><a href="zfinx.html">"Zfinx", "Zdinx", "Zhinx", "Zhinxmin" Extensions for Floating-Point in Integer Registers, Version 1.0</a></span>
  <span class="next"><a href="zc.html">"Zc*" Extension for Code Size Reduction, Version 1.0.0</a></span>
</nav>
</article>  </div>
</main>
<div class="modal micromodal-slide" id="modal-versions" aria-hidden="true">
    <div class="modal__overlay" tabindex="-1" data-micromodal-close>
        <div class="modal__container" role="dialog" aria-modal="true">
            <main class="modal__content" id="modal-versions-content">
              <button data-micromodal-close class="modal-versions-close">
                <svg width="28px" height="28px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><defs><style>.cls-1h{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}</style></defs><title/><g id="cross"><line class="cls-1h" x1="7" x2="25" y1="7" y2="25"/><line class="cls-1h" x1="7" x2="25" y1="25" y2="7"/></g></svg>
              </button>
                  <ul class="nav-versions">
                      <li class="component">
                        <div>
                          <a class="title" href="../index.html">ISA Specifications</a>
                        </div>                        <div class="version-item is-active">
                          <div>
                            <button class="version-toggle" type="button">
                              <span></span>
                              Stable
                            </button>
                          </div>
                          <ul class="versions">
  <li class="version">
    <a href="../index.html">
      default
    </a>
  </li>
</ul>                        </div>
                        
                      </li>
                  </ul>
            </main>
        </div>
    </div>
</div>

</div>
<footer class="hidden">
		<script src="../../_/js/vendor/lunr.js"></script>
<script src="../../_/js/search-ui.js" id="search-ui-script" data-site-root-path="../.." data-snippet-length="100" data-stylesheet="../../_/css/search.css"></script>
<script async src="../../search-index.js"></script>
</footer><script src="../../_/js/vendor/import.js"></script>
<script src="../../_/js/site.js"></script>
<script async src="../../_/js/vendor/highlight.js"></script>
<script async src="../../_/js/vendor/spring-tabs.js" data-sync-storage-key="docs:preferred-tab"></script>
  </body>
</html>
